# V1 Mind Core å‰ç«¯ UI è®¾è®¡è‰æ¡ˆ

**æ–‡æ¡£çŠ¶æ€**: è‰æ¡ˆ v0.4 - RBACå®Œæ•´ç‰ˆ
**åˆ›å»ºæ—¥æœŸ**: 2026-02-17
**æ›´æ–°æ—¥æœŸ**: 2026-02-17
**ç›®æ ‡**: äº§å“çº§ Mind Core ç®¡ç†ç•Œé¢å’ŒèŠå¤©æœåŠ¡

> **ä¿®æ­£è¯´æ˜**: 
> - ç§»é™¤äº†`conversations`è¡¨ï¼ŒV1è®¾è®¡æ˜¯ä¸€ä¸ªç”¨æˆ·+ä¸€ä¸ªä¸“å®¶=ä¸€ä¸ªè¿ç»­å¯¹è¯ï¼Œæ²¡æœ‰å¤šä¼šè¯æ¦‚å¿µã€‚
> - æ·»åŠ äº†å®Œæ•´çš„RBACæƒé™ç³»ç»Ÿè®¾è®¡ï¼ŒåŒ…å«rolesã€permissionsã€role_permissionsã€user_rolesè¡¨ï¼Œæ”¯æŒèœå•æƒé™ä¸Vueè·¯ç”±ç»‘å®šã€‚

---

## 1. éœ€æ±‚ç¡®è®¤

### 1.1 æ ¸å¿ƒå®šä½

| ç»´åº¦ | ç¡®è®¤éœ€æ±‚ |
|------|---------|
| **åœºæ™¯** | äº§å“åŒ– - ä½œä¸ºæœåŠ¡æä¾›ç»™å¤–éƒ¨ç”¨æˆ· |
| **åŠŸèƒ½** | ç®¡ç†åå° + ç”¨æˆ·èŠå¤©ç•Œé¢ |
| **æŠ€æœ¯æ ˆ** | Vue 3 + TypeScript + Vite |
| **éƒ¨ç½²** | UIå†…ç½®åˆ°åç«¯ï¼ŒåŒç«¯å£æœåŠ¡ |
| **ç§»åŠ¨ç«¯** | å“åº”å¼é€‚é… |
| **è®¤è¯** | å¤šç”¨æˆ·ç³»ç»Ÿ + åŒTokenæœºåˆ¶ |
| **å®æ—¶** | API + SSEï¼ˆæµå¼è¾“å‡ºï¼Œè¯¦è§2.2ï¼‰ |

### 1.2 ç”¨æˆ·è§’è‰²ç»†åŒ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·è§’è‰²ä½“ç³»                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚   æ™®é€šç”¨æˆ·    â”‚      â”‚   ä¸“å®¶ä½œè€…    â”‚      â”‚   å¹³å°ç®¡ç†å‘˜  â”‚ â”‚
â”‚   â”‚  (End User)  â”‚      â”‚  (Creator)   â”‚      â”‚   (Admin)    â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚          â”‚                     â”‚                     â”‚          â”‚
â”‚          â–¼                     â–¼                     â–¼          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚ â€¢ ä¸ä¸“å®¶å¯¹è¯  â”‚      â”‚ â€¢ åˆ›å»ºä¸“å®¶   â”‚      â”‚ â€¢ ç”¨æˆ·ç®¡ç†   â”‚ â”‚
â”‚   â”‚ â€¢ æŸ¥çœ‹å†å²   â”‚      â”‚ â€¢ é…ç½®Soul  â”‚      â”‚ â€¢ ç³»ç»Ÿé…ç½®   â”‚ â”‚
â”‚   â”‚ â€¢ ç®¡ç†è¯é¢˜   â”‚      â”‚ â€¢ å¼€å‘æŠ€èƒ½   â”‚      â”‚ â€¢ æ¨¡å‹ç®¡ç†   â”‚ â”‚
â”‚   â”‚ â€¢ ä¸ªäººè®¾ç½®   â”‚      â”‚ â€¢ å‘å¸ƒæŠ€èƒ½   â”‚      â”‚ â€¢ ç›‘æ§å‘Šè­¦   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ â€¢ æŸ¥çœ‹ç»Ÿè®¡   â”‚      â”‚ â€¢ æ•°æ®ç®¡ç†   â”‚ â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚   æƒé™çº§åˆ«: æ™®é€šç”¨æˆ· < ä¸“å®¶ä½œè€… < å¹³å°ç®¡ç†å‘˜                       â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. æŠ€æœ¯å†³ç­–

### 2.1 TypeScript vs JavaScript

**ç»“è®ºï¼šä½¿ç”¨ TypeScript + Vue 3**

è€ƒè™‘åˆ°é¡¹ç›®å°†å…¨éƒ¨ç”±ç¼–ç¨‹ AI å®ç°ï¼ŒTypeScript çš„ç±»å‹ç³»ç»Ÿèƒ½æ˜¾è‘—é™ä½ AI ç”Ÿæˆä»£ç çš„å‡ºé”™ç‡ã€‚

| ç»´åº¦ | TypeScript | JavaScript |
|------|-----------|------------|
| **AIä»£ç ç”Ÿæˆå‡†ç¡®ç‡** | âœ… ç±»å‹çº¦æŸå‡å°‘ AI å¹»è§‰ | å®¹æ˜“å‡ºç°ç±»å‹é”™è¯¯ |
| **æ¥å£ä¸€è‡´æ€§** | âœ… ç±»å‹å®šä¹‰ä½œä¸º"å¥‘çº¦" | ä¾èµ–æ–‡æ¡£è¯´æ˜ |
| **é‡æ„å®‰å…¨æ€§** | âœ… ç¼–è¯‘å™¨æ£€æŸ¥å½±å“èŒƒå›´ | å®¹æ˜“é—æ¼ |
| **IDEæ”¯æŒ** | âœ… æ›´å¥½çš„è¡¥å…¨å’Œæç¤º | åŸºç¡€æ”¯æŒ |
| **è°ƒè¯•æˆæœ¬** | âœ… ç¼–è¯‘æœŸå‘ç°é”™è¯¯ | è¿è¡ŒæœŸæ‰å‘ç° |

**ä¸ºä»€ä¹ˆé€‰æ‹© TS + AI**ï¼š
1. **ç±»å‹å³æ–‡æ¡£** - æ¥å£å®šä¹‰è®© AI å‡†ç¡®ç†è§£æ•°æ®ç»“æ„
2. **çº¦æŸ AI è¾“å‡º** - ç±»å‹ç³»ç»Ÿä½œä¸º"æŠ¤æ "ï¼Œå‡å°‘å¹»è§‰ä»£ç 
3. **è‡ªåŠ¨æ¨æ–­** - Composition API é…åˆ TS ç±»å‹æ¨æ–­ï¼Œå“åº”å¼ä»£ç æ›´å‡†ç¡®
4. **å‰åç«¯ç»Ÿä¸€** - å¯å…±äº«ç±»å‹å®šä¹‰ï¼ŒAPI è°ƒç”¨ç±»å‹å®‰å…¨

**é…ç½®å»ºè®®**ï¼š
```json
// tsconfig.json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "moduleResolution": "node",
    "strict": true,
    "jsx": "preserve",
    "sourceMap": true,
    "esModuleInterop": true
  }
}
```

### 2.2 WebSocket vs SSE é€‰æ‹©

**ç»“è®ºï¼šSSEï¼ˆServer-Sent Eventsï¼‰æ›´é€‚åˆ AI èŠå¤©åœºæ™¯**

| ç‰¹æ€§ | WebSocket | SSE |
|------|-----------|-----|
| **é€šä¿¡æ–¹å‘** | åŒå‘ | å•å‘ï¼ˆæœåŠ¡å™¨â†’å®¢æˆ·ç«¯ï¼‰ |
| **åè®®** | ws:// / wss:// | http:// / https://ï¼ˆå¤ç”¨ï¼‰ |
| **é‡è¿æœºåˆ¶** | éœ€æ‰‹åŠ¨å®ç° | æµè§ˆå™¨è‡ªåŠ¨é‡è¿ |
| **æµè§ˆå™¨æ”¯æŒ** | ç°ä»£æµè§ˆå™¨ | é™¤IEå¤–éƒ½æ”¯æŒ |
| **ç©¿é€ä»£ç†** | å¯èƒ½éœ€è¦é¢å¤–é…ç½® | åŸºäºHTTPï¼Œæ— é—®é¢˜ |
| **é€‚ç”¨åœºæ™¯** | æ¸¸æˆã€å®æ—¶åä½œ | è‚¡ç¥¨è¡Œæƒ…ã€AIæµå¼è¾“å‡º |

**ä¸ºä»€ä¹ˆé€‰æ‹© SSE**ï¼š
1. AIèŠå¤©ä¸»è¦æ˜¯æœåŠ¡å™¨å‘å®¢æˆ·ç«¯æ¨é€æµå¼å“åº”
2. ç”¨æˆ·å‘é€æ¶ˆæ¯å¯ç”¨æ™®é€šPOSTè¯·æ±‚
3. è‡ªåŠ¨é‡è¿ã€åŸºäºHTTPæ›´ç®€å•
4. ç°æœ‰åç«¯æ˜¯Expressï¼ŒSSEå®ç°ç®€å•

```javascript
// SSE å®ç°ç¤ºä¾‹ï¼ˆåç«¯ï¼‰
app.get('/chat/stream', (req, res) => {
  res.setHeader('Content-Type', 'text/event-stream');
  res.setHeader('Cache-Control', 'no-cache');
  res.setHeader('Connection', 'keep-alive');
  
  // æ¨¡æ‹Ÿæµå¼è¾“å‡º
  const words = ['ä½ å¥½', 'ï¼', 'æˆ‘', 'æ˜¯', 'AI', 'åŠ©æ‰‹'];
  let i = 0;
  const interval = setInterval(() => {
    if (i >= words.length) {
      res.write('event: end\ndata: [DONE]\n\n');
      clearInterval(interval);
      res.end();
      return;
    }
    res.write(`data: ${JSON.stringify({ content: words[i] })}\n\n`);
    i++;
  }, 100);
});
```

### 2.3 åŒTokenè®¤è¯æœºåˆ¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      åŒTokenè®¤è¯æµç¨‹                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ç™»å½•                                                           â”‚
â”‚    â”‚                                                            â”‚
â”‚    â–¼                                                            â”‚
â”‚  POST /auth/login â”€â”€â”€â”€â”€â”€â”€â–º éªŒè¯ç”¨æˆ·åå¯†ç                         â”‚
â”‚    â”‚                       ç”ŸæˆAccess Token (15åˆ†é’Ÿ)             â”‚
â”‚    â”‚                       ç”ŸæˆRefresh Token (7å¤©)               â”‚
â”‚    â”‚                       Token ä¸­åŒ…å« user_id å’Œ roles         â”‚
â”‚    â”‚                                                            â”‚
â”‚    â–¼                                                            â”‚
â”‚  å®¢æˆ·ç«¯å­˜å‚¨ï¼šlocalStorage.setItem('accessToken', ...)           â”‚
â”‚           localStorage.setItem('refreshToken', ...)             â”‚
â”‚           (æˆ–æ›´å®‰å…¨çš„ httpOnly cookie)                          â”‚
â”‚                                                                 â”‚
â”‚  APIè¯·æ±‚                                                        â”‚
â”‚    â”‚                                                            â”‚
â”‚    â–¼                                                            â”‚
â”‚  Header: Authorization: Bearer <accessToken>                    â”‚
â”‚    â”‚                                                            â”‚
â”‚    â”œâ”€â”€ 401 Tokenè¿‡æœŸ â”€â”€â”€â–º POST /auth/refresh                    â”‚
â”‚    â”‚                      Header: X-Refresh-Token: <refreshToken>â”‚
â”‚    â”‚                      â—„â”€â”€ æ–°çš„ Access Token                 â”‚
â”‚    â”‚                                                            â”‚
â”‚    â””â”€â”€ 403 æƒé™ä¸è¶³ â”€â”€â”€â”€â–º æç¤ºç”¨æˆ·å‡çº§æƒé™æˆ–é‡æ–°ç™»å½•              â”‚
â”‚                                                                 â”‚
â”‚  å®‰å…¨è€ƒè™‘                                                       â”‚
â”‚    â€¢ Refresh Token å­˜å‚¨åœ¨ httpOnly cookie æ›´å®‰å…¨                â”‚
â”‚    â€¢ Access Token è¿‡æœŸæ—¶é—´çŸ­ï¼Œå‡å°‘æ³„éœ²é£é™©                      â”‚
â”‚    â€¢ Refresh Token å¯æ’¤é”€ï¼ˆç”¨æˆ·ç™»å‡ºã€æ£€æµ‹åˆ°å¼‚å¸¸ï¼‰                â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.4 User ID è·å–ä¸æ•°æ®å­˜å‚¨

**JWT Token ç»“æ„ï¼š**

```typescript
// Access Token Payload
{
  "sub": "u5r8k2m9p3q7",      // user_id (ä¸»ä½“)
  "username": "eric",          // ç”¨æˆ·å
  "roles": ["creator"],        // è§’è‰²åˆ—è¡¨
  "iat": 1708156800,           // ç­¾å‘æ—¶é—´
  "exp": 1708157700            // è¿‡æœŸæ—¶é—´ (15åˆ†é’Ÿå)
}
```

**åç«¯è·å– User IDï¼š**

```typescript
// middleware/auth.ts
import jwt from 'jsonwebtoken';

export const authMiddleware = async (ctx: Context, next: Next) => {
  const token = ctx.headers.authorization?.replace('Bearer ', '');
  
  if (!token) {
    ctx.status = 401;
    ctx.body = { code: 401, message: 'è¯·å…ˆç™»å½•', data: null };
    return;
  }
  
  try {
    const decoded = jwt.verify(token, process.env.JWT_SECRET) as JWTPayload;
    
    // å°† user_id æŒ‚è½½åˆ°ä¸Šä¸‹æ–‡ï¼Œä¾›åç»­ä½¿ç”¨
    ctx.state.user = {
      userId: decoded.sub,
      username: decoded.username,
      roles: decoded.roles
    };
    
    await next();
  } catch (err) {
    ctx.status = 401;
    ctx.body = { code: 401, message: 'Tokenæ— æ•ˆæˆ–å·²è¿‡æœŸ', data: null };
  }
};

// åœ¨è·¯ç”±ä¸­ä½¿ç”¨
router.post('/api/chat/send', authMiddleware, async (ctx) => {
  const { userId } = ctx.state.user;  // ä» Token ä¸­è·å–
  const { expertId, content } = ctx.request.body;
  
  // å­˜å‚¨æ¶ˆæ¯æ—¶è‡ªåŠ¨å…³è” user_id
  const messageId = await messageService.create({
    userId,           // u5r8k2m9p3q7
    expertId,         // eric
    contactId: userId, // åŒä¸€ç”¨æˆ· = åŒä¸€ contact
    role: 'user',
    content,
    createdAt: new Date()
  });
  
  ctx.body = { code: 200, message: 'success', data: { messageId } };
});
```

**æ•°æ®åº“å­˜å‚¨å…³ç³»ï¼ˆæœ€ç»ˆç‰ˆï¼‰ï¼š**

```sql
-- ä¿®æ”¹ messages è¡¨ï¼Œæ·»åŠ  user_id å­—æ®µ
ALTER TABLE messages ADD COLUMN user_id VARCHAR(32) AFTER id;
ALTER TABLE messages ADD FOREIGN KEY (user_id) REFERENCES users(id);
-- å¯é€‰ï¼šmessages ä¸å†éœ€è¦ contact_idï¼Œå› ä¸ºç”»åƒé€šè¿‡ user_id å…³è”
-- ä¿ç•™ contact_id åªæ˜¯ä¸ºäº†å…¼å®¹æˆ–è®°å½•å½“æ—¶ä½¿ç”¨çš„ç”»åƒç‰ˆæœ¬

-- messages è¡¨ç»“æ„
CREATE TABLE messages (
  id VARCHAR(32) PRIMARY KEY,
  user_id VARCHAR(32) NOT NULL,      -- æ–°å¢ï¼šå…³è” users è¡¨
  expert_id VARCHAR(32) NOT NULL,    -- å…³è” experts è¡¨
  contact_id VARCHAR(32),            -- å¯é€‰ï¼šå½“æ—¶ä½¿ç”¨çš„ç”»åƒç‰ˆæœ¬
  role ENUM('user', 'assistant', 'system') NOT NULL,
  content TEXT,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id),
  FOREIGN KEY (expert_id) REFERENCES experts(id),
  FOREIGN KEY (contact_id) REFERENCES contacts(id)
);

-- contacts è¡¨é‡æ„ï¼ˆç”¨æˆ·ç”»åƒæ¡£æ¡ˆ - ä¸€å¯¹ä¸€æ‰©å±•è¡¨ï¼‰
-- è¯´æ˜ï¼šcontacts æ˜¯ users çš„æ‰©å±•ï¼Œå­˜å‚¨ AI éœ€è¦äº†è§£çš„ç”¨æˆ·ä¿¡æ¯
-- åŸºç¡€ä¿¡æ¯ï¼ˆname/email/avatarï¼‰åœ¨ users è¡¨ï¼Œç”»åƒæ•°æ®åœ¨ contacts è¡¨
-- ä½¿ç”¨ user_id ä½œä¸ºä¸»é”®ï¼Œå› ä¸ºæ˜¯ä¸€å¯¹ä¸€å…³ç³»
CREATE TABLE contacts (
  user_id VARCHAR(32) PRIMARY KEY,    -- ç›´æ¥ä½¿ç”¨ user_id ä½œä¸ºä¸»é”®
  
  -- AI ç”»åƒæ•°æ®ï¼ˆè·¨ä¸“å®¶å…±äº«ï¼Œæ‰€æœ‰ä¸“å®¶è¯»å†™ï¼‰
  interests JSON,                    -- å…´è¶£ç‚¹ ["ç¼–ç¨‹", "æ—…æ¸¸", "ç§‘å¹»ç”µå½±"]
  taboos JSON,                       -- ç¦å¿Œ/æ•æ„Ÿè¯é¢˜ ["æ”¿æ²»", "å®—æ•™"]
  personality_tags JSON,             -- æ€§æ ¼æ ‡ç­¾ {"communication": "direct", "pace": "fast"}
  
  -- ä¸“å®¶å†™å…¥çš„è§‚å¯Ÿï¼ˆä¸åŒä¸“å®¶å¯ä»¥å†™ï¼Œæ‰€æœ‰äººå¯è¯»ï¼‰
  expert_notes JSON,                 -- {"eric": "å–œæ¬¢ä»£ç ç¤ºä¾‹", "linda": "åå¥½å€¾å¬"}
  
  -- å…¶ä»–æ‰©å±•æ•°æ®
  preferences JSON,                  -- é€šç”¨åå¥½è®¾ç½®
  context_summary TEXT,              -- é•¿æœŸè®°å¿†æ‘˜è¦
  
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);

-- users è¡¨ï¼ˆè´¦å·ä¿¡æ¯ï¼‰
CREATE TABLE users (
  id VARCHAR(32) PRIMARY KEY,
  username VARCHAR(50) UNIQUE NOT NULL,
  email VARCHAR(100) UNIQUE NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  avatar_url VARCHAR(255),           -- ç”¨æˆ·å¤´åƒ
  display_name VARCHAR(100),         -- æ˜¾ç¤ºåç§°
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  last_login_at DATETIME,
  is_active BOOLEAN DEFAULT TRUE
);
```

**è¡¨èŒè´£åˆ†ç¦»ï¼š**

| è¡¨ | èŒè´£ | å­˜å‚¨å†…å®¹ |
|----|------|---------|
| `users` | è´¦å·ç³»ç»Ÿ | ç™»å½•å‡­è¯ã€ç”¨æˆ·åã€é‚®ç®±ã€å¤´åƒã€è§’è‰² |
| `contacts` | ç”¨æˆ·ç”»åƒ | å…´è¶£ã€ç¦å¿Œã€æ€§æ ¼ã€ä¸“å®¶è§‚å¯Ÿã€è®°å¿†æ‘˜è¦ |

**æ•°æ®å…³ç³»ï¼š**

```
users (è´¦å·)
  â”œâ”€â”€ messages (user_id)
  â””â”€â”€ contacts (user_id, ä¸€å¯¹ä¸€)  -- AI ç”»åƒæ¡£æ¡ˆ
        â””â”€â”€ interests, taboos, expert_notes (è·¨ä¸“å®¶å…±äº«)

experts
  â””â”€â”€ messages (expert_id)
        â””â”€â”€ è¯»å–/å†™å…¥ contacts è¡¨ï¼ˆå…±äº«ç”»åƒï¼‰
```

**æ ¸å¿ƒè®¾è®¡åŸåˆ™ï¼š**

1. **ç”»åƒè·¨ä¸“å®¶å…±äº«**
   - ç”¨æˆ·å’Œ Eric èŠå¤©æ—¶æåˆ°"æˆ‘å–œæ¬¢ç§‘å¹»ç”µå½±"â†’å†™å…¥ `contacts.interests`
   - ç”¨æˆ·å’Œ Linda èŠå¤©æ—¶ï¼ŒLinda ä¹Ÿèƒ½çœ‹åˆ°"ä»–å–œæ¬¢ç§‘å¹»ç”µå½±"

2. **ä¸“å®¶å¯ä»¥å†™è§‚å¯Ÿç¬”è®°**
   ```json
   // expert_notes å­—æ®µ
   {
     "eric": {"observation": "å–œæ¬¢ä»£ç ç¤ºä¾‹", "updated_at": "2026-02-17"},
     "linda": {"observation": "æƒ…ç»ªæ•æ„Ÿï¼Œéœ€è¦æ¸©å’Œå›åº”", "updated_at": "2026-02-16"}
   }
   ```

3. **åŸºç¡€ä¿¡æ¯ vs ç”»åƒæ•°æ®åˆ†ç¦»**
   - `users`ï¼šname, email, avatarï¼ˆé™æ€è´¦å·ä¿¡æ¯ï¼‰
   - `contacts`ï¼šinterests, taboos, personalityï¼ˆåŠ¨æ€ AI ç”»åƒï¼‰

**æŸ¥è¯¢ç¤ºä¾‹ï¼š**

```sql
-- è·å–ç”¨æˆ·ä¸ç‰¹å®šä¸“å®¶çš„å†å²æ¶ˆæ¯
SELECT * FROM messages 
WHERE user_id = 'u5r8k2m9p3q7' AND expert_id = 'eric'
ORDER BY created_at ASC;

-- è·å–ç”¨æˆ·çš„æ‰€æœ‰å¯¹è¯åˆ—è¡¨ï¼ˆæŒ‰ä¸“å®¶åˆ†ç»„ï¼‰
SELECT 
  expert_id,
  MAX(created_at) as last_message_at,
  COUNT(*) as message_count
FROM messages
WHERE user_id = 'u5r8k2m9p3q7'
GROUP BY expert_id
ORDER BY last_message_at DESC;

-- è·å–ç”¨æˆ·å®Œæ•´ä¿¡æ¯ï¼ˆè´¦å· + ç”»åƒï¼‰
SELECT 
  u.id, u.username, u.display_name, u.avatar_url,
  c.interests, c.taboos, c.personality_tags, c.expert_notes
FROM users u
LEFT JOIN contacts c ON u.id = c.user_id
WHERE u.id = 'u5r8k2m9p3q7';
```

**åç«¯å®ç°ï¼š**

```typescript
// service/chat.ts
export class ChatService {
  // å‘é€æ¶ˆæ¯
  async sendMessage(userId: string, expertId: string, content: string) {
    // 1. ç¡®ä¿ç”¨æˆ·ç”»åƒå­˜åœ¨
    await this.getOrCreateContact(userId);
    
    // 2. å­˜å‚¨æ¶ˆæ¯ï¼ˆcontact_id = user_idï¼Œå› ä¸ºæ˜¯ä¸€å¯¹ä¸€å…³ç³»ï¼‰
    const messageId = await db.query(`
      INSERT INTO messages (id, user_id, expert_id, contact_id, role, content)
      VALUES (?, ?, ?, ?, 'user', ?)
    `, [newID(16), userId, expertId, userId, content]);
    
    return { messageId };
  }
  
  // è·å–æˆ–åˆ›å»ºç”¨æˆ·ç”»åƒ
  private async getOrCreateContact(userId: string) {
    let [contact] = await db.query(`
      SELECT * FROM contacts WHERE user_id = ?
    `, [userId]);
    
    if (!contact) {
      await db.query(`
        INSERT INTO contacts (user_id, interests, taboos, expert_notes)
        VALUES (?, '[]', '[]', '{}')
      `, [userId]);
      contact = { user_id: userId, interests: [], taboos: [], expert_notes: {} };
    }
    
    return contact;
  }
  
  // æ›´æ–°ç”¨æˆ·ç”»åƒï¼ˆä¸“å®¶åœ¨å¯¹è¯ä¸­å‘ç°æ–°ä¿¡æ¯ï¼‰
  async updateContact(userId: string, updates: Partial<Contact>) {
    // ç¤ºä¾‹ï¼šEric å‘ç°ç”¨æˆ·å–œæ¬¢ç¼–ç¨‹
    // updates = { interests: ["ç¼–ç¨‹", "ç§‘å¹»ç”µå½±"] }
    await db.query(`
      UPDATE contacts 
      SET interests = ?, updated_at = NOW()
      WHERE user_id = ?
    `, [JSON.stringify(updates.interests), userId]);
  }
  
  // ä¸“å®¶å†™å…¥è§‚å¯Ÿç¬”è®°
  async addExpertNote(userId: string, expertId: string, note: string) {
    const [contact] = await db.query(`
      SELECT expert_notes FROM contacts WHERE user_id = ?
    `, [userId]);
    
    const notes = JSON.parse(contact.expert_notes || '{}');
    notes[expertId] = { observation: note, updated_at: new Date().toISOString() };
    
    await db.query(`
      UPDATE contacts SET expert_notes = ? WHERE user_id = ?
    `, [JSON.stringify(notes), userId]);
  }
}
```

**è¯´æ˜ï¼š**
- **èŒè´£åˆ†ç¦»**ï¼š`users` ç®¡è´¦å·ï¼Œ`contacts` ç®¡ AI ç”»åƒ
- **è·¨ä¸“å®¶å…±äº«**ï¼šç”»åƒæ•°æ®æ‰€æœ‰ä¸“å®¶å¯è¯»å¯å†™
- **ä¸“å®¶è§‚å¯Ÿ**ï¼š`expert_notes` è®°å½•ä¸åŒä¸“å®¶å¯¹ç”¨æˆ·çš„ç‰¹ç‚¹è§‚å¯Ÿ
- **ä¸€å¯¹ä¸€å…³ç³»**ï¼š`contacts.user_id` å”¯ä¸€ï¼Œä¿è¯ä¸€ä¸ªç”¨æˆ·ä¸€ä¸ªç”»åƒ

**å‰ç«¯ Axios å°è£…ï¼š**

```typescript
// utils/request.ts
import axios from 'axios';

const request = axios.create({
  baseURL: '/api',
  timeout: 30000
});

// è¯·æ±‚æ‹¦æˆªå™¨ï¼šè‡ªåŠ¨æ·»åŠ  Token
request.interceptors.request.use((config) => {
  const token = localStorage.getItem('accessToken');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

// å“åº”æ‹¦æˆªå™¨ï¼šç»Ÿä¸€å¤„ç† 401
request.interceptors.response.use(
  (response) => response.data,
  async (error) => {
    if (error.response?.status === 401) {
      // å°è¯•åˆ·æ–° Token
      const refreshToken = localStorage.getItem('refreshToken');
      if (refreshToken) {
        try {
          const { data } = await axios.post('/api/auth/refresh', null, {
            headers: { 'X-Refresh-Token': refreshToken }
          });
          localStorage.setItem('accessToken', data.data.accessToken);
          // é‡è¯•åŸè¯·æ±‚
          return request(error.config);
        } catch {
          // åˆ·æ–°å¤±è´¥ï¼Œè·³è½¬ç™»å½•
          window.location.href = '/login';
        }
      }
    }
    return Promise.reject(error);
  }
);

export default request;
```

**è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ï¼š**

```typescript
// stores/user.ts
import { defineStore } from 'pinia';

export const useUserStore = defineStore('user', {
  state: () => ({
    userInfo: null as UserInfo | null
  }),
  
  actions: {
    async fetchUserInfo() {
      // è°ƒç”¨ /api/auth/me è·å–ç”¨æˆ·ä¿¡æ¯
      const { data } = await request.get('/auth/me');
      this.userInfo = data;
      return data;
    },
    
    // ä» JWT è§£æ userIdï¼ˆæ— éœ€è¯·æ±‚APIï¼‰
    getUserIdFromToken(): string | null {
      const token = localStorage.getItem('accessToken');
      if (!token) return null;
      
      try {
        const payload = JSON.parse(atob(token.split('.')[1]));
        return payload.sub;  // user_id
      } catch {
        return null;
      }
    }
  }
});
```

---

## 3. ç³»ç»Ÿæ¶æ„

### 3.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              å®¢æˆ·ç«¯å±‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                         Vue 3 SPA                                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  ç”¨æˆ·ç«¯ç•Œé¢  â”‚  â”‚  ç®¡ç†åå°   â”‚  â”‚  ä¸“å®¶å·¥ä½œå®¤  â”‚  â”‚  å®æ—¶ç›‘æ§   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  /chat      â”‚  â”‚  /admin     â”‚  â”‚  /studio    â”‚  â”‚  /monitor   â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  å…±äº«ç»„ä»¶ï¼šAxioså°è£…ã€SSEå¤„ç†ã€æƒé™æ§åˆ¶ã€å“åº”å¼å¸ƒå±€                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼ HTTP / SSE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              æœåŠ¡å±‚ï¼ˆKoa 2ï¼‰                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  é™æ€æ–‡ä»¶æœåŠ¡  â”‚  APIè·¯ç”±  â”‚  è®¤è¯ä¸­é—´ä»¶  â”‚  SSEæµå¤„ç†  â”‚  æƒé™æ£€æŸ¥    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚                                       â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚                              â–¼               â–¼                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚     Expert Instance (ç°æœ‰)      â”‚  â”‚         æ–°å¢æ¨¡å—                 â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚LLM Client â”‚ â”‚Memory Sys â”‚   â”‚  â”‚  â”‚  Auth     â”‚ â”‚  User     â”‚   â”‚    â”‚
â”‚  â”‚  â”‚Reflective â”‚ â”‚Tool Mgr   â”‚   â”‚  â”‚  â”‚  Service  â”‚ â”‚  Service  â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              æ•°æ®å±‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   experts   â”‚  â”‚   users     â”‚  â”‚  messages   â”‚  â”‚    topics   â”‚          â”‚
â”‚  â”‚   skills    â”‚  â”‚permissions  â”‚  â”‚   contacts  â”‚  â”‚   sessions  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                              MariaDB                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 è·¯ç”±è®¾è®¡

```javascript
// å‰ç«¯è·¯ç”±ï¼ˆVue Routerï¼‰
const routes = [
  // å…¬å¼€è·¯ç”±
  { path: '/login', component: Login },
  { path: '/register', component: Register },
  
  // ç”¨æˆ·ç«¯ï¼ˆéœ€ç™»å½•ï¼‰
  {
    path: '/',
    component: UserLayout,
    meta: { requiresAuth: true },
    children: [
      { path: '', redirect: '/chat' },
      { path: 'chat', component: Chat },           // èŠå¤©ç•Œé¢
      { path: 'chat/:contactId', component: Chat }, // æŒ‡å®šå¯¹è¯
      { path: 'history', component: History },      // å†å²è®°å½•
      { path: 'topics', component: Topics },        // è¯é¢˜ç®¡ç†
      { path: 'settings', component: UserSettings },// ä¸ªäººè®¾ç½®
    ]
  },
  
  // ä¸“å®¶å·¥ä½œå®¤ï¼ˆéœ€ä¸“å®¶ä½œè€…æƒé™ï¼‰
  {
    path: '/studio',
    component: StudioLayout,
    meta: { requiresAuth: true, role: 'creator' },
    children: [
      { path: '', component: StudioOverview },
      { path: 'experts', component: MyExperts },    // æˆ‘çš„ä¸“å®¶
      { path: 'experts/:id', component: ExpertEditor }, // ç¼–è¾‘ä¸“å®¶
      { path: 'skills', component: MySkills },      // æˆ‘çš„æŠ€èƒ½
      { path: 'skills/:id', component: SkillEditor },   // ç¼–è¾‘æŠ€èƒ½
      { path: 'analytics', component: Analytics },  // æ•°æ®åˆ†æ
    ]
  },
  
  // ç®¡ç†åå°ï¼ˆéœ€ç®¡ç†å‘˜æƒé™ï¼‰
  {
    path: '/admin',
    component: AdminLayout,
    meta: { requiresAuth: true, role: 'admin' },
    children: [
      { path: '', component: AdminDashboard },          // ä»ªè¡¨ç›˜
      { path: 'users', component: UserManagement },     // ç”¨æˆ·ç®¡ç†
      { path: 'experts', component: ExpertManagement }, // ä¸“å®¶ç®¡ç†
      { path: 'providers', component: ProviderManagement }, // æä¾›å•†ç®¡ç†
      { path: 'models', component: ModelManagement },   // æ¨¡å‹é…ç½®
      { path: 'skills', component: SkillManagement },   // æŠ€èƒ½ç®¡ç†
      { path: 'topics', component: TopicManagement },   // è¯é¢˜ç®¡ç†
      { path: 'system', component: SystemSettings },    // ç³»ç»Ÿè®¾ç½®
      { path: 'logs', component: LogViewer },           // æ—¥å¿—æŸ¥çœ‹
      { path: 'monitor', component: MonitorDashboard }, // å®æ—¶ç›‘æ§
    ]
  }
];
```

---

## 4. é¡µé¢è®¾è®¡

### 4.1 ç”¨æˆ·èŠå¤©ç•Œé¢ï¼ˆ/chatï¼‰

#### 4.1.1 ç»„ä»¶é€‰å‹å»ºè®®ï¼šDeep Chat

æ¨èä½¿ç”¨ **Deep Chat** (`deep-chat-react`) ä½œä¸ºåŸºç¡€èŠå¤©ç»„ä»¶ï¼ŒåŸå› ï¼š

| ç‰¹æ€§ | Deep Chat | è‡ªç ”ç»„ä»¶ |
|------|-----------|---------|
| **AIåœºæ™¯ä¼˜åŒ–** | âœ… ä¸“ä¸ºAIå¯¹è¯è®¾è®¡ï¼Œæ”¯æŒæµå¼è¾“å‡º | éœ€è‡ªè¡Œå®ç°SSE |
| **Vue 3æ”¯æŒ** | âœ… é€šè¿‡React wrapperæˆ–åŸç”ŸWeb Componentå¯ç”¨ | - |
| **åŠŸèƒ½å®Œæ•´** | âœ… å†…ç½®æ¶ˆæ¯æ°”æ³¡ã€è¾“å…¥æ¡†ã€å‘é€æŒ‰é’®ã€åŠ è½½çŠ¶æ€ | éœ€é€ä¸ªå¼€å‘ |
| **å¯å®šåˆ¶æ€§** | âœ… æ”¯æŒæ·±åº¦æ ·å¼å®šåˆ¶å’Œè‡ªå®šä¹‰æŒ‰é’® | - |
| **ç»´æŠ¤æˆæœ¬** | âœ… ç¤¾åŒºæ´»è·ƒï¼ŒæŒç»­æ›´æ–° | è‡ªè¡Œç»´æŠ¤ |

**å®‰è£…ï¼š**
```bash
npm install deep-chat-react
# æˆ–åŸç”Ÿ Web Component
npm install deep-chat
```

**å‚è€ƒèµ„æºï¼š**
- GitHub: https://github.com/ovidijusparsiunas/deep-chat
- æ–‡æ¡£: https://deepchat.dev/
- ç‰¹æ€§: æ”¯æŒæ¶ˆæ¯æ ·å¼å®šåˆ¶ã€æµå¼å“åº”ã€æ–‡ä»¶ä¸Šä¼ ã€ä»£ç é«˜äº®ç­‰

#### 4.1.2 ä¸“å®¶é€‰æ‹©æµç¨‹

ç”¨æˆ·è¿›å…¥èŠå¤©é¡µé¢å‰ï¼Œéœ€è¦å…ˆé€‰æ‹©æˆ–åˆ‡æ¢ä¸“å®¶ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ§  Mind Core                                [ğŸ””] [âš™ï¸] [ç”¨æˆ·å¤´åƒ â–¼]         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   é€‰æ‹©ä¸“å®¶å¯¹è¯                                                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                                                                     â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚   â”‚   â”‚  [å¤´åƒ]   â”‚  â”‚  [å¤´åƒ]   â”‚  â”‚  [å¤´åƒ]   â”‚  â”‚  [å¤´åƒ]   â”‚         â”‚  â”‚
â”‚   â”‚   â”‚          â”‚  â”‚          â”‚  â”‚          â”‚  â”‚          â”‚         â”‚  â”‚
â”‚   â”‚   â”‚  Eric    â”‚  â”‚  Linda   â”‚  â”‚   AI     â”‚  â”‚   +      â”‚         â”‚  â”‚
â”‚   â”‚   â”‚ ç¨‹åºå‘˜   â”‚  â”‚ å¿ƒç†å’¨è¯¢å¸ˆâ”‚  â”‚  åŠ©æ‰‹    â”‚  â”‚ å‘ç°æ›´å¤š  â”‚         â”‚  â”‚
â”‚   â”‚   â”‚ [é€‰æ‹©]   â”‚  â”‚ [é€‰æ‹©]   â”‚  â”‚ [é€‰æ‹©]   â”‚  â”‚          â”‚         â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚   â”‚                                                                     â”‚  â”‚
â”‚   â”‚   æœ€è¿‘å¯¹è¯                                                            â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚   â”‚   â”‚ ğŸ¤– Eric                    ä»Šå¤© 10:23    ä½ å¥½ï¼æˆ‘æŸ¥ä¸€ä¸‹...   â”‚  â”‚  â”‚
â”‚   â”‚   â”‚ ğŸ¤– Linda                   æ˜¨å¤© 15:30    æˆ‘ç†è§£ä½ çš„æ„Ÿå—...   â”‚  â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚   â”‚                                                                     â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.1.3 ä¸‰æ å¼æ¡Œé¢ç«¯å¸ƒå±€ï¼ˆå·²é€‰æ‹©ä¸“å®¶ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ§  Mind Core    [ä¸“å®¶é€‰æ‹©å™¨ â–¼]    [ğŸ””] [âš™ï¸] [ç”¨æˆ·å¤´åƒ â–¼]                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             â”‚                                              â”‚                            â”‚
â”‚  ğŸ“ Topics  â”‚   ğŸ’¬ å¯¹è¯åŒºåŸŸ (Deep Chat ç»„ä»¶)                 â”‚   ğŸ‘¤ è°ƒè¯•é¢æ¿              â”‚
â”‚             â”‚                                              â”‚                            â”‚
â”‚  æ—¥å¸¸ç”Ÿæ´»   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  æŠ€æœ¯è®¨è®º   â”‚   â”‚ ğŸ‘¤ ä½ ï¼šä½ å¥½ï¼Œä»Šå¤©ä¸Šæµ·å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ       â”‚ â”‚  â”‚ ç”¨æˆ·ç”»åƒ              â”‚  â”‚
â”‚  é—²èŠ      â”‚   â”‚                                        â”‚ â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚
â”‚             â”‚   â”‚ ğŸ¤– Ericï¼šä½ å¥½ï¼æˆ‘æŸ¥ä¸€ä¸‹...              â”‚ â”‚  â”‚ èŒä¸šï¼šç¨‹åºå‘˜          â”‚  â”‚
â”‚  [+ æ–°å»º]   â”‚   â”‚ [å·¥å…·è°ƒç”¨: weather - ä¸Šæµ·]              â”‚ â”‚  â”‚ å…´è¶£ï¼šç§‘å¹»ç”µå½±ã€æŠ€æœ¯  â”‚  â”‚
â”‚             â”‚   â”‚                                        â”‚ â”‚  â”‚ ç¦å¿Œï¼šæ”¿æ²»è®¨è®º        â”‚  â”‚
â”‚             â”‚   â”‚ ä¸Šæµ·ä»Šå¤©å¤©æ°”æ™´æœ—...                     â”‚ â”‚  â”‚ [ç¼–è¾‘ç”»åƒ]           â”‚  â”‚
â”‚             â”‚   â”‚ [å·²å½’æ¡£åˆ° Topic: æ—¥å¸¸ç”Ÿæ´»]              â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                            â”‚
â”‚             â”‚                                              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚             â”‚   [ğŸ¤] [è¾“å…¥æ¶ˆæ¯...              ] [â–¶ï¸]     â”‚  â”‚ ä¸Šä¸€æ¡æ¶ˆæ¯            â”‚  â”‚
â”‚             â”‚   [ğŸ“] [ğŸ› ï¸ å·¥å…·] [âš¡ å¿«æ·æŒ‡ä»¤]              â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚
â”‚             â”‚                                              â”‚  â”‚ å†…å®¹ï¼šæŸ¥è¯¢ä¸Šæµ·å¤©æ°”    â”‚  â”‚
â”‚             â”‚                                              â”‚  â”‚ Tokens: 45           â”‚  â”‚
â”‚             â”‚                                              â”‚  â”‚                      â”‚  â”‚
â”‚             â”‚                                              â”‚  â”‚ å†…å¿ƒç‹¬ç™½ï¼š           â”‚  â”‚
â”‚             â”‚                                              â”‚  â”‚ "ç”¨æˆ·æƒ³äº†è§£å¤©æ°”ï¼Œ    â”‚  â”‚
â”‚             â”‚                                              â”‚  â”‚  å¯èƒ½éœ€è¦è§„åˆ’å¤–å‡º"   â”‚  â”‚
â”‚             â”‚                                              â”‚  â”‚                      â”‚  â”‚
â”‚             â”‚                                              â”‚  â”‚ å·¥å…·è°ƒç”¨ï¼šweather    â”‚  â”‚
â”‚             â”‚                                              â”‚  â”‚ å‚æ•°ï¼š{"city":"ä¸Šæµ·"}â”‚  â”‚
â”‚             â”‚                                              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                                              â”‚                            â”‚
â”‚             â”‚                                              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚             â”‚                                              â”‚  â”‚ Token ç»Ÿè®¡           â”‚  â”‚
â”‚             â”‚                                              â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚
â”‚             â”‚                                              â”‚  â”‚ æœ¬æ¬¡å¯¹è¯ï¼š156 / 8192 â”‚  â”‚
â”‚             â”‚                                              â”‚  â”‚ ä»Šæ—¥æ€»è®¡ï¼š2,847      â”‚  â”‚
â”‚             â”‚                                              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                                              â”‚                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.1.4 ä¸“å®¶é€‰æ‹©å™¨è®¾è®¡

**æ–¹æ¡ˆï¼šé¡¶éƒ¨ Dropdown + å¿«æ·æ ‡ç­¾æ ï¼ˆæ¨èï¼‰**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ§  Mind Core  [ğŸ¤– Eric â–¼]  [Eric][Linda][AIåŠ©æ‰‹][+æ›´å¤š]    [ğŸ””] [âš™ï¸] [ğŸ‘¤] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ç‚¹å‡» [ğŸ¤– Eric â–¼] å±•å¼€ä¸‹æ‹‰èœå•ï¼š                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚  â”‚ ğŸ” æœç´¢ä¸“å®¶...                         â”‚                                 â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                 â”‚
â”‚  â”‚ ğŸ‘¤ Eric              ç¨‹åºå‘˜  â— åœ¨çº¿    â”‚                                 â”‚
â”‚  â”‚ ğŸ‘¤ Linda            å¿ƒç†å’¨è¯¢å¸ˆ â— åœ¨çº¿  â”‚                                 â”‚
â”‚  â”‚ ğŸ¤– AIåŠ©æ‰‹            é€šç”¨åŠ©æ‰‹  â— åœ¨çº¿  â”‚                                 â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                 â”‚
â”‚  â”‚ ğŸ  ä¸“å®¶å¹¿åœºï¼ˆå‘ç°æ›´å¤šï¼‰                 â”‚                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è®¾è®¡è¯´æ˜ï¼š**
- **Dropdown ä¸»é€‰æ‹©å™¨**ï¼šæ˜¾ç¤ºå½“å‰ä¸“å®¶å¤´åƒ+åç§°ï¼Œç‚¹å‡»å±•å¼€å®Œæ•´åˆ—è¡¨
- **å¿«æ·æ ‡ç­¾æ **ï¼šå±•ç¤ºæœ€è¿‘ä½¿ç”¨çš„3-4ä¸ªä¸“å®¶ï¼Œç‚¹å‡»å¿«é€Ÿåˆ‡æ¢
- **ä¸“å®¶å¹¿åœºå…¥å£**ï¼šåœ¨ä¸‹æ‹‰èœå•åº•éƒ¨æä¾›å‘ç°æ›´å¤šä¸“å®¶çš„å…¥å£

**æ›¿ä»£æ–¹æ¡ˆå¯¹æ¯”ï¼š**

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ |
|------|------|------|
| **Dropdown + å¿«æ·æ ‡ç­¾**ï¼ˆæ¨èï¼‰ | èŠ‚çœç©ºé—´ï¼Œå¿«é€Ÿåˆ‡æ¢å¸¸ç”¨ä¸“å®¶ | éœ€è¦ç‚¹å‡»æ‰èƒ½çœ‹åˆ°å®Œæ•´åˆ—è¡¨ |
| Tab æ ‡ç­¾é¡µ | ä¸€ç›®äº†ç„¶ï¼Œç‚¹å‡»å³åˆ‡ | ä¸“å®¶å¤šæ—¶å ç”¨å¤§é‡é¡¶éƒ¨ç©ºé—´ |
| ä¾§è¾¹æ é€‰æ‹©å™¨ | å¯å±•ç¤ºä¸“å®¶è¯¦æƒ…å’ŒçŠ¶æ€ | éœ€è¦å¸¸é©»ä¾§è¾¹æ ï¼Œå ç”¨å®½åº¦ |
| Banner æ¨ªå¹… | è§†è§‰å†²å‡»å¼º | å¹²æ‰°å¯¹è¯åŒºåŸŸï¼Œä¸é€‚åˆå¸¸é©» |

#### 4.1.5 å³ä¾§é¢æ¿è¯¦ç»†è®¾è®¡

**é¢æ¿ç»“æ„ï¼ˆå¯æŠ˜å ï¼‰ï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â—€ è°ƒè¯•é¢æ¿                   â”‚  â† å¯æŠ˜å æŒ‰é’®
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              â”‚
â”‚  ğŸ‘¤ å½“å‰ç”¨æˆ·ç”»åƒ              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  preferred_name: å°æ˜  â”‚  â”‚
â”‚  â”‚  introduction: å–œæ¬¢... â”‚  â”‚
â”‚  â”‚  background: ç¨‹åºå‘˜    â”‚  â”‚
â”‚  â”‚  notes: ä¸Šæ¬¡èŠåˆ°...    â”‚  â”‚
â”‚  â”‚  [æŸ¥çœ‹å®Œæ•´æ¡£æ¡ˆ]        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚
â”‚  ğŸ’­ æœ€åä¸€æ¡æ¶ˆæ¯è¯¦æƒ…          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ è§’è‰²ï¼šuser             â”‚  â”‚
â”‚  â”‚ å†…å®¹ï¼šä¸Šæµ·å¤©æ°”å¦‚ä½•ï¼Ÿ   â”‚  â”‚
â”‚  â”‚                        â”‚  â”‚
â”‚  â”‚ Tokens: 12             â”‚  â”‚
â”‚  â”‚ æ—¶é—´ï¼š10:23:45         â”‚  â”‚
â”‚  â”‚                        â”‚  â”‚
â”‚  â”‚ [æ˜¾ç¤ºå†…å¿ƒç‹¬ç™½] â–¼       â”‚  â”‚
â”‚  â”‚ "ç”¨æˆ·è¯¢é—®å¤©æ°”ï¼Œå¯èƒ½    â”‚  â”‚
â”‚  â”‚  æƒ³è¦å®‰æ’å¤–å‡ºæ´»åŠ¨"     â”‚  â”‚
â”‚  â”‚                        â”‚  â”‚
â”‚  â”‚ [æ˜¾ç¤ºå·¥å…·è°ƒç”¨] â–¼       â”‚  â”‚
â”‚  â”‚ weather.get_weather    â”‚  â”‚
â”‚  â”‚ {"city": "ä¸Šæµ·"}       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚
â”‚  ğŸ“ Topic æ¸…å•               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â— æ—¥å¸¸ç”Ÿæ´»    23æ¡    â†‘â”‚  â”‚
â”‚  â”‚ â—‹ æŠ€æœ¯è®¨è®º    156æ¡    â”‚  â”‚  â† å¯æ»šåŠ¨
â”‚  â”‚ â—‹ é—²èŠ        8æ¡      â”‚  â”‚
â”‚  â”‚ â—‹ æœªå½’æ¡£      3æ¡      â”‚  â”‚
â”‚  â”‚                        â”‚  â”‚
â”‚  â”‚ [+ æ–°å»º Topic]         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚
â”‚  ğŸ“Š å¯¹è¯ç»Ÿè®¡                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æœ¬è½®å¯¹è¯ï¼š156 tokens   â”‚  â”‚
â”‚  â”‚ ç´¯è®¡æ¶ˆæ¯ï¼š189 æ¡       â”‚  â”‚
â”‚  â”‚ å¯¹è¯æ—¶é•¿ï¼š32 åˆ†é’Ÿ      â”‚  â”‚
â”‚  â”‚ æœ€åæ´»è·ƒï¼šåˆšåˆš         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚
â”‚  ğŸ› ï¸ å·²å¯ç”¨æŠ€èƒ½              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ âœ… Weather (å¤©æ°”æŸ¥è¯¢)  â”‚  â”‚
â”‚  â”‚ âœ… Search (ç½‘ç»œæœç´¢)   â”‚  â”‚
â”‚  â”‚ âšª Calculator (è®¡ç®—å™¨) â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.1.6 å¯å±•ç¤ºçš„å…¶ä»–ä¿¡æ¯ï¼ˆåŸºäºè¡¨è®¾è®¡ï¼‰

æ ¹æ®æ•°æ®åº“è¡¨ç»“æ„ï¼Œå³ä¾§é¢æ¿è¿˜å¯ä»¥å±•ç¤ºï¼š

| ä¿¡æ¯ç±»åˆ« | æ•°æ®æ¥æºè¡¨ | å±•ç¤ºå†…å®¹ | ä»·å€¼ |
|---------|-----------|---------|------|
| **ä¸“å®¶ä¿¡æ¯** | experts | å½“å‰ä¸“å®¶çš„æ€§æ ¼è®¾å®šã€ä»·å€¼è§‚ã€ç¦å¿Œ | å¸®åŠ©ç”¨æˆ·äº†è§£ä¸“å®¶ |
| **æŠ€èƒ½è¯¦æƒ…** | skills, expert_skills | å½“å‰å¯¹è¯å¯ç”¨äº†å“ªäº›æŠ€èƒ½ | è§£é‡ŠAIçš„èƒ½åŠ›è¾¹ç•Œ |
| **ä¸Šä¸‹æ–‡çŠ¶æ€** | messages | å½“å‰ä¸Šä¸‹æ–‡çª—å£ä½¿ç”¨æƒ…å†µ | é¢„è­¦ä¸Šä¸‹æ–‡å³å°†è€—å°½ |
| **æƒ…æ„Ÿåˆ†æ** | messages.inner_voice | ä¸“å®¶å¯¹ç”¨æˆ·çš„æƒ…æ„Ÿæ€åº¦å˜åŒ– | å¢è¿›äº’åŠ¨è¶£å‘³æ€§ |
| **å¯¹è¯æ•ˆç‡** | messages (ç»Ÿè®¡) | å¹³å‡å“åº”æ—¶é—´ã€tokenæ•ˆç‡ | ç³»ç»Ÿæ€§èƒ½æ„ŸçŸ¥ |

#### 4.1.7 ç§»åŠ¨ç«¯é€‚é…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ§  Mind Core    [â˜°] [ğŸ‘¤]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ¤– Eric â–¼]                â”‚  â† ç®€åŒ–ä¸“å®¶é€‰æ‹©å™¨
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ‘¤ ä½ ï¼šä½ å¥½...         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ¤– Ericï¼šä½ å¥½ï¼...     â”‚  â”‚
â”‚  â”‚ ä¸Šæµ·ä»Šå¤©å¤©æ°”...        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â”‚
â”‚          ...                â”‚
â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ¤] [è¾“å…¥æ¶ˆæ¯...    ] [â–¶ï¸] â”‚
â”‚ [ğŸ“] [ğŸ› ï¸] [âš¡] [â„¹ï¸]          â”‚  â† â„¹ï¸ å±•å¼€å³ä¾§é¢æ¿
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç§»åŠ¨ç«¯å³ä¾§é¢æ¿ï¼š**
- ä»¥ **Bottom Sheet** å½¢å¼ä»åº•éƒ¨æ»‘å‡º
- æˆ–ä»¥ **Drawer** å½¢å¼ä»å³ä¾§æ»‘å‡º
- é€šè¿‡åº•éƒ¨å·¥å…·æ çš„ â„¹ï¸ æŒ‰é’®è§¦å‘

### 4.2 ä¸“å®¶å·¥ä½œå®¤ï¼ˆ/studioï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ§  Mind Core                          ä¸“å®¶å·¥ä½œå®¤    [ğŸ‘¤ åˆ›ä½œè€…ä¸­å¿ƒ â–¼]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚                                                           â”‚
â”‚  ğŸ“Š æ¦‚è§ˆ        â”‚   æˆ‘çš„ä¸“å®¶                                  [+ åˆ›å»º]     â”‚
â”‚  ğŸ‘¤ ä¸“å®¶ç®¡ç†    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  ğŸ› ï¸ æŠ€èƒ½ç®¡ç†    â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”                                          â”‚    â”‚
â”‚  ğŸ“ˆ æ•°æ®åˆ†æ    â”‚   â”‚ â”‚ å¤´åƒ  â”‚  Eric                    [ç¼–è¾‘] [ğŸ“Š] [â‹®] â”‚    â”‚
â”‚  âš™ï¸ è®¾ç½®        â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”˜  34å²ç¨‹åºå‘˜ï¼Œæ¸©å’Œå¹½é»˜...                    â”‚    â”‚
â”‚                 â”‚   â”‚       çŠ¶æ€ï¼šâœ… å·²å‘å¸ƒ  å¯¹è¯ï¼š1.2k  è¯„åˆ†ï¼š4.8         â”‚    â”‚
â”‚                 â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                 â”‚                                                           â”‚
â”‚                 â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚                 â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”                                          â”‚    â”‚
â”‚                 â”‚   â”‚ â”‚ å¤´åƒ  â”‚  Linda                   [ç¼–è¾‘] [ğŸ“Š] [â‹®] â”‚    â”‚
â”‚                 â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”˜  å¿ƒç†å’¨è¯¢å¸ˆï¼Œå–„äºå€¾å¬...                    â”‚    â”‚
â”‚                 â”‚   â”‚       çŠ¶æ€ï¼šğŸ“ è‰ç¨¿   å¯¹è¯ï¼š-    è¯„åˆ†ï¼š-           â”‚    â”‚
â”‚                 â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                 â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 ç®¡ç†åå°ï¼ˆ/adminï¼‰

#### 4.3.1 ä»ªè¡¨ç›˜ï¼ˆ/adminï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ§  Mind Core                              ç®¡ç†åå°    [ğŸ‘¤ ç®¡ç†å‘˜ â–¼]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚                                                           â”‚
â”‚  ğŸ“Š ä»ªè¡¨ç›˜      â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  ğŸ‘¥ ç”¨æˆ·ç®¡ç†    â”‚   â”‚ æ³¨å†Œç”¨æˆ· â”‚ â”‚ æ´»è·ƒä¸“å®¶ â”‚ â”‚ ä»Šæ—¥å¯¹è¯ â”‚ â”‚ ç³»ç»Ÿè´Ÿè½½ â”‚   â”‚
â”‚  ğŸ¤– ä¸“å®¶ç®¡ç†    â”‚   â”‚   1,234  â”‚ â”‚    15    â”‚ â”‚   892    â”‚ â”‚   42%    â”‚   â”‚
â”‚  ğŸ¢ æä¾›å•†ç®¡ç†  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  ğŸ”§ æ¨¡å‹é…ç½®    â”‚                                                           â”‚
â”‚  ğŸ› ï¸ æŠ€èƒ½ç®¡ç†    â”‚   [å¯¹è¯è¶‹åŠ¿å›¾]          [ç”¨æˆ·æ´»è·ƒåº¦é¥¼å›¾]                    â”‚
â”‚  ğŸ“ è¯é¢˜ç®¡ç†    â”‚                                                           â”‚
â”‚  ğŸ“œ æ—¥å¿—æŸ¥çœ‹    â”‚   æœ€è¿‘æ´»åŠ¨                                                â”‚
â”‚  ğŸ–¥ï¸ å®æ—¶ç›‘æ§    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  âš™ï¸ ç³»ç»Ÿè®¾ç½®    â”‚   â”‚ æ—¶é—´        ç”¨æˆ·      åŠ¨ä½œ      å¯¹è±¡              â”‚    â”‚
â”‚                 â”‚   â”‚ 10:23:45    user_001  å¯¹è¯      Eric              â”‚    â”‚
â”‚                 â”‚   â”‚ 10:20:12    user_002  åˆ›å»ºä¸“å®¶  æœªå‘½åä¸“å®¶        â”‚    â”‚
â”‚                 â”‚   â”‚ 10:15:33    admin     ä¿®æ”¹é…ç½®  é»˜è®¤æ¨¡å‹          â”‚    â”‚
â”‚                 â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                 â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.3.2 æ¨¡å‹æä¾›å•†ç®¡ç†ï¼ˆ/admin/providersï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ§  Mind Core                          æä¾›å•†ç®¡ç†    [ğŸ‘¤ ç®¡ç†å‘˜ â–¼]         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚                                                           â”‚
â”‚  ğŸ“Š ä»ªè¡¨ç›˜      â”‚   æ¨¡å‹æä¾›å•†                                [+ æ–°å»º]     â”‚
â”‚  ğŸ‘¥ ç”¨æˆ·ç®¡ç†    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  ğŸ¤– ä¸“å®¶ç®¡ç†    â”‚   â”‚ åç§°        Base URL              çŠ¶æ€   æ“ä½œ    â”‚    â”‚
â”‚  ğŸ¢ æä¾›å•†ç®¡ç†  â”‚   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚
â”‚  ğŸ”§ æ¨¡å‹é…ç½®    â”‚   â”‚ OpenAI      https://api.openai...   âœ…    [ç¼–è¾‘]  â”‚    â”‚
â”‚  ğŸ› ï¸ æŠ€èƒ½ç®¡ç†    â”‚   â”‚ DeepSeek    https://api.deepse...   âœ…    [ç¼–è¾‘]  â”‚    â”‚
â”‚  ğŸ“ è¯é¢˜ç®¡ç†    â”‚   â”‚ Ollama      http://localhost:1...   âš ï¸    [ç¼–è¾‘]  â”‚    â”‚
â”‚  ğŸ“œ æ—¥å¿—æŸ¥çœ‹    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  ğŸ–¥ï¸ å®æ—¶ç›‘æ§    â”‚                                                           â”‚
â”‚  âš™ï¸ ç³»ç»Ÿè®¾ç½®    â”‚   [åˆ†é¡µ: 1 2 3 ... 10]                                    â”‚
â”‚                 â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æä¾›å•†ç¼–è¾‘è¡¨å•ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¼–è¾‘æä¾›å•†                              [X]                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  åç§° *          [OpenAI                          ]         â”‚
â”‚                                                             â”‚
â”‚  Base URL *      [https://api.openai.com/v1       ]         â”‚
â”‚                                                             â”‚
â”‚  API Key         [sk-********************************    ]  â”‚
â”‚                  [æ˜¾ç¤º] [å¤åˆ¶] [é‡æ–°ç”Ÿæˆ]                    â”‚
â”‚                                                             â”‚
â”‚  è¶…æ—¶æ—¶é—´ (ms)   [60000                             ]       â”‚
â”‚                                                             â”‚
â”‚  çŠ¶æ€            ( ) å¯ç”¨  ( ) ç¦ç”¨                         â”‚
â”‚                                                             â”‚
â”‚                        [å–æ¶ˆ]        [ä¿å­˜]                 â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.3.3 æ¨¡å‹é…ç½®ï¼ˆ/admin/modelsï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ§  Mind Core                            æ¨¡å‹é…ç½®    [ğŸ‘¤ ç®¡ç†å‘˜ â–¼]         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚                                                           â”‚
â”‚  ğŸ“Š ä»ªè¡¨ç›˜      â”‚   LLM æ¨¡å‹                                  [+ æ–°å»º]     â”‚
â”‚  ğŸ‘¥ ç”¨æˆ·ç®¡ç†    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  ğŸ¤– ä¸“å®¶ç®¡ç†    â”‚   â”‚ ID            åç§°        æä¾›å•†      ä¸Šä¸‹æ–‡   çŠ¶æ€â”‚    â”‚
â”‚  ğŸ¢ æä¾›å•†ç®¡ç†  â”‚   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚
â”‚  ğŸ”§ æ¨¡å‹é…ç½®    â”‚   â”‚ deepseek-c... deepseek... DeepSeek    128K    âœ…  â”‚    â”‚
â”‚  ğŸ› ï¸ æŠ€èƒ½ç®¡ç†    â”‚   â”‚ gpt-4         GPT-4       OpenAI      128K    âœ…  â”‚    â”‚
â”‚  ğŸ“ è¯é¢˜ç®¡ç†    â”‚   â”‚ gpt-3.5-t...  GPT-3.5     OpenAI      16K     âœ…  â”‚    â”‚
â”‚  ğŸ“œ æ—¥å¿—æŸ¥çœ‹    â”‚   â”‚ llama3        Llama 3     Ollama      128K    âš ï¸  â”‚    â”‚
â”‚  ğŸ–¥ï¸ å®æ—¶ç›‘æ§    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  âš™ï¸ ç³»ç»Ÿè®¾ç½®    â”‚                                                           â”‚
â”‚                 â”‚   [åˆ†é¡µ: 1 2 3 ... 10]                                    â”‚
â”‚                 â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ¨¡å‹ç¼–è¾‘è¡¨å•ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¼–è¾‘æ¨¡å‹                                [X]                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  æ¨¡å‹ ID *       [deepseek-chat                     ]       â”‚
â”‚                                                             â”‚
â”‚  æ˜¾ç¤ºåç§° *      [DeepSeek Chat                     ]       â”‚
â”‚                                                             â”‚
â”‚  æä¾›å•† *        [DeepSeek                      â–¼]         â”‚
â”‚                                                             â”‚
â”‚  ä¸Šä¸‹æ–‡å¤§å°      [128000                            ]       â”‚
â”‚                                                             â”‚
â”‚  æœ€å¤§ Token      [4096                              ]       â”‚
â”‚                                                             â”‚
â”‚  æè¿°            [DeepSeek V3 æ¨¡å‹ï¼Œé€‚åˆä¸€èˆ¬å¯¹è¯...  ]       â”‚
â”‚                                                             â”‚
â”‚  çŠ¶æ€            ( ) å¯ç”¨  ( ) ç¦ç”¨                         â”‚
â”‚                                                             â”‚
â”‚                        [å–æ¶ˆ]        [ä¿å­˜]                 â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.3.4 æŠ€èƒ½ç®¡ç†ï¼ˆ/admin/skillsï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ§  Mind Core                            æŠ€èƒ½ç®¡ç†    [ğŸ‘¤ ç®¡ç†å‘˜ â–¼]         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚                                                           â”‚
â”‚  ğŸ“Š ä»ªè¡¨ç›˜      â”‚   æŠ€èƒ½åˆ—è¡¨                                  [+ æ–°å»º]     â”‚
â”‚  ğŸ‘¥ ç”¨æˆ·ç®¡ç†    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  ğŸ¤– ä¸“å®¶ç®¡ç†    â”‚   â”‚ åç§°        æè¿°                  æ¥æº     çŠ¶æ€   â”‚    â”‚
â”‚  ğŸ¢ æä¾›å•†ç®¡ç†  â”‚   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚
â”‚  ğŸ”§ æ¨¡å‹é…ç½®    â”‚   â”‚ Weather     æŸ¥è¯¢å¤©æ°”ä¿¡æ¯          æ•°æ®åº“    âœ…    â”‚    â”‚
â”‚  ğŸ› ï¸ æŠ€èƒ½ç®¡ç†    â”‚   â”‚ Search      æœç´¢äº’è”ç½‘å†…å®¹        æ•°æ®åº“    âœ…    â”‚    â”‚
â”‚  ğŸ“ è¯é¢˜ç®¡ç†    â”‚   â”‚ Calculator  æ•°å­¦è®¡ç®—å·¥å…·          æ–‡ä»¶ç³»ç»Ÿ  âœ…    â”‚    â”‚
â”‚  ğŸ“œ æ—¥å¿—æŸ¥çœ‹    â”‚   â”‚ WebReader   ç½‘é¡µå†…å®¹è¯»å–          æ•°æ®åº“    ğŸ“    â”‚    â”‚
â”‚  ğŸ–¥ï¸ å®æ—¶ç›‘æ§    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  âš™ï¸ ç³»ç»Ÿè®¾ç½®    â”‚                                                           â”‚
â”‚                 â”‚   [åˆ†é¡µ: 1 2 3 ... 10]                                    â”‚
â”‚                 â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æŠ€èƒ½ç¼–è¾‘è¡¨å•ï¼ˆæ•°æ®åº“æ¨¡å¼ï¼‰ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¼–è¾‘æŠ€èƒ½                                [X]                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  åŸºæœ¬ä¿¡æ¯                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  æŠ€èƒ½ ID *       [weather                           ]       â”‚
â”‚  åç§° *          [Weather                           ]       â”‚
â”‚  æè¿°            [æŸ¥è¯¢æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯            ]       â”‚
â”‚                                                             â”‚
â”‚  æ¥æºç±»å‹ *      [æ•°æ®åº“æ¨¡å¼                      â–¼]       â”‚
â”‚                                                             â”‚
â”‚  æŠ€èƒ½æ–‡æ¡£ (Markdown)                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ # Weather Skill                                    â”‚    â”‚
â”‚  â”‚                                                    â”‚    â”‚
â”‚  â”‚ æŸ¥è¯¢å¤©æ°”ä¿¡æ¯...                                    â”‚    â”‚
â”‚  â”‚                                                    â”‚    â”‚
â”‚  â”‚ ## å·¥å…·                                            â”‚    â”‚
â”‚  â”‚ ...                                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚  ä»£ç  (JavaScript)                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ module.exports = {                                 â”‚    â”‚
â”‚  â”‚   name: "weather",                                 â”‚    â”‚
â”‚  â”‚   ...                                              â”‚    â”‚
â”‚  â”‚ };                                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚  é…ç½® (JSON)                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ {                                                  â”‚    â”‚
â”‚  â”‚   "apiKey": "${WEATHER_API_KEY}"                   â”‚    â”‚
â”‚  â”‚ }                                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚  çŠ¶æ€            ( ) å¯ç”¨  ( ) ç¦ç”¨                         â”‚
â”‚                                                             â”‚
â”‚                        [å–æ¶ˆ]        [ä¿å­˜]  [æµ‹è¯•è¿è¡Œ]     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.3.5 è¯é¢˜ç®¡ç†ï¼ˆ/admin/topicsï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ§  Mind Core                            è¯é¢˜ç®¡ç†    [ğŸ‘¤ ç®¡ç†å‘˜ â–¼]         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚                                                           â”‚
â”‚  ğŸ“Š ä»ªè¡¨ç›˜      â”‚   è¯é¢˜åˆ—è¡¨                                    [ç­›é€‰ â–¼]   â”‚
â”‚  ğŸ‘¥ ç”¨æˆ·ç®¡ç†    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  ğŸ¤– ä¸“å®¶ç®¡ç†    â”‚   â”‚ è¯é¢˜å      ä¸“å®¶    ç”¨æˆ·        æ¶ˆæ¯æ•°   æ›´æ–°æ—¶é—´  â”‚    â”‚
â”‚  ğŸ¢ æä¾›å•†ç®¡ç†  â”‚   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚
â”‚  ğŸ”§ æ¨¡å‹é…ç½®    â”‚   â”‚ æ—¥å¸¸ç”Ÿæ´»    Eric    user_001    23      10:23    â”‚    â”‚
â”‚  ğŸ› ï¸ æŠ€èƒ½ç®¡ç†    â”‚   â”‚ æŠ€æœ¯è®¨è®º    Eric    user_002    156     æ˜¨å¤©     â”‚    â”‚
â”‚  ğŸ“ è¯é¢˜ç®¡ç†    â”‚   â”‚ å¿ƒç†å’¨è¯¢    Linda   user_001    45      æ˜¨å¤©     â”‚    â”‚
â”‚  ğŸ“œ æ—¥å¿—æŸ¥çœ‹    â”‚   â”‚ é—²èŠ        Eric    user_003    8       2å¤©å‰    â”‚    â”‚
â”‚  ğŸ–¥ï¸ å®æ—¶ç›‘æ§    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  âš™ï¸ ç³»ç»Ÿè®¾ç½®    â”‚                                                           â”‚
â”‚                 â”‚   [åˆ†é¡µ: 1 2 3 ... 10]                                    â”‚
â”‚                 â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. ç»„ä»¶è®¾è®¡

### 5.1 å…±äº«ç»„ä»¶æ¸…å•

```
components/
â”œâ”€â”€ common/                          # é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ Button.vue                   # æŒ‰é’®
â”‚   â”œâ”€â”€ Input.vue                    # è¾“å…¥æ¡†
â”‚   â”œâ”€â”€ Modal.vue                    # å¼¹çª—
â”‚   â”œâ”€â”€ Toast.vue                    # æç¤º
â”‚   â”œâ”€â”€ Loading.vue                  # åŠ è½½ä¸­
â”‚   â””â”€â”€ Empty.vue                    # ç©ºçŠ¶æ€
â”‚
â”œâ”€â”€ layout/                          # å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ AppHeader.vue                # é¡¶éƒ¨å¯¼èˆª
â”‚   â”œâ”€â”€ Sidebar.vue                  # ä¾§è¾¹æ 
â”‚   â”œâ”€â”€ MobileNav.vue                # ç§»åŠ¨ç«¯å¯¼èˆª
â”‚   â””â”€â”€ PageContainer.vue            # é¡µé¢å®¹å™¨
â”‚
â”œâ”€â”€ chat/                            # èŠå¤©ç›¸å…³
â”‚   â”œâ”€â”€ ChatMessage.vue              # å•æ¡æ¶ˆæ¯ï¼ˆæˆ–ä½¿ç”¨ Deep Chatï¼‰
â”‚   â”œâ”€â”€ ChatInput.vue                # è¾“å…¥æ¡†
â”‚   â”œâ”€â”€ ChatHistory.vue              # å†å²åˆ—è¡¨
â”‚   â”œâ”€â”€ ToolCall.vue                 # å·¥å…·è°ƒç”¨å±•ç¤º
â”‚   â”œâ”€â”€ StreamingText.vue            # æµå¼æ–‡æœ¬
â”‚   â”œâ”€â”€ ExpertSelector.vue           # ä¸“å®¶é€‰æ‹©å™¨ï¼ˆDropdown + å¿«æ·æ ‡ç­¾ï¼‰
â”‚   â”œâ”€â”€ TopicSidebar.vue             # Topic ä¾§è¾¹æ 
â”‚   â”œâ”€â”€ DebugPanel.vue               # è°ƒè¯•ä¿¡æ¯é¢æ¿ï¼ˆå³ä¾§ï¼‰
â”‚   â”œâ”€â”€ UserProfileCard.vue          # ç”¨æˆ·ç”»åƒå¡ç‰‡
â”‚   â”œâ”€â”€ MessageDetails.vue           # æ¶ˆæ¯è¯¦æƒ…ï¼ˆå«å†…å¿ƒç‹¬ç™½ã€tokenæ•°ï¼‰
â”‚   â”œâ”€â”€ TokenStats.vue               # Token ç»Ÿè®¡ç»„ä»¶
â”‚   â””â”€â”€ SkillStatus.vue              # æŠ€èƒ½çŠ¶æ€å±•ç¤º
â”‚
â””â”€â”€ admin/                           # ç®¡ç†åå°
    â”œâ”€â”€ DataTable.vue                # æ•°æ®è¡¨æ ¼
    â”œâ”€â”€ StatCard.vue                 # ç»Ÿè®¡å¡ç‰‡
    â”œâ”€â”€ LogViewer.vue                # æ—¥å¿—æŸ¥çœ‹å™¨
    â”œâ”€â”€ PermissionToggle.vue         # æƒé™å¼€å…³
    â”œâ”€â”€ ProviderForm.vue             # æä¾›å•†è¡¨å•
    â”œâ”€â”€ ModelForm.vue                # æ¨¡å‹è¡¨å•
    â”œâ”€â”€ SkillEditor.vue              # æŠ€èƒ½ç¼–è¾‘å™¨
    â”œâ”€â”€ CodeEditor.vue               # ä»£ç ç¼–è¾‘å™¨ï¼ˆæŠ€èƒ½ä»£ç ï¼‰
    â””â”€â”€ TopicList.vue                # è¯é¢˜åˆ—è¡¨
```

### 5.2 å…³é”®ç»„ä»¶ï¼šChatMessage

```vue
<!-- components/chat/ChatMessage.vue -->
<template>
  <div :class="['message', { 'is-user': isUser, 'is-streaming': isStreaming }]">
    <div class="avatar">
      <img :src="avatar" :alt="sender" />
    </div>
    <div class="content">
      <div class="header">
        <span class="sender">{{ sender }}</span>
        <span class="time">{{ formatTime(timestamp) }}</span>
      </div>
      <div class="body" v-html="renderedContent"></div>
      <div v-if="toolCalls" class="tool-calls">
        <ToolCall v-for="tool in toolCalls" :key="tool.id" :data="tool" />
      </div>
      <div v-if="topicId" class="topic-tag">
        ğŸ“ {{ topicName }}
      </div>
    </div>
  </div>
</template>

<script setup>
import { computed } from 'vue';
import { marked } from 'marked';
import ToolCall from './ToolCall.vue';

const props = defineProps({
  message: Object,
  isStreaming: Boolean
});

const isUser = computed(() => props.message.role === 'user');
const sender = computed(() => isUser.value ? 'ä½ ' : props.message.expertName);
const avatar = computed(() => isUser.value ? '/user-avatar.png' : props.message.expertAvatar);
const renderedContent = computed(() => marked(props.message.content));
</script>
```

---

## 6. API æ‰©å±•éœ€æ±‚

### 6.1 ç»Ÿä¸€è¿”å›æ ¼å¼

æ‰€æœ‰ API è¿”å›ç»Ÿä¸€ä½¿ç”¨ä»¥ä¸‹ JSON ç»“æ„ï¼š

```typescript
// æˆåŠŸå“åº”
{
  "code": 200,           // HTTP çŠ¶æ€ç æˆ–ä¸šåŠ¡çŠ¶æ€ç 
  "message": "success",  // æç¤ºä¿¡æ¯
  "data": { ... },       // ä¸šåŠ¡æ•°æ®ï¼ˆå¯é€‰ï¼‰
  "timestamp": 1708156800000  // æœåŠ¡å™¨æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
}

// é”™è¯¯å“åº”
{
  "code": 400,
  "message": "å‚æ•°é”™è¯¯ï¼šç”¨æˆ·åä¸èƒ½ä¸ºç©º",
  "data": null,
  "timestamp": 1708156800000,
  "error": {             // å¯é€‰ï¼Œè¯¦ç»†é”™è¯¯ä¿¡æ¯ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
    "type": "ValidationError",
    "details": [...]
  }
}
```

**HTTP çŠ¶æ€ç è§„èŒƒï¼š**

| çŠ¶æ€ç  | ä½¿ç”¨åœºæ™¯ | ç¤ºä¾‹ |
|--------|---------|------|
| 200 | æ“ä½œæˆåŠŸ | æŸ¥è¯¢æˆåŠŸã€æ›´æ–°æˆåŠŸ |
| 201 | åˆ›å»ºæˆåŠŸ | ç”¨æˆ·æ³¨å†Œã€ä¸“å®¶åˆ›å»º |
| 204 | æ— å†…å®¹è¿”å› | åˆ é™¤æˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ | ç¼ºå°‘å¿…å¡«å­—æ®µã€æ ¼å¼é”™è¯¯ |
| 401 | æœªè®¤è¯ | Token è¿‡æœŸã€æœªç™»å½• |
| 403 | æ— æƒé™ | æ™®é€šç”¨æˆ·è®¿é—®ç®¡ç†æ¥å£ |
| 404 | èµ„æºä¸å­˜åœ¨ | ç”¨æˆ·ä¸å­˜åœ¨ã€ä¸“å®¶ä¸å­˜åœ¨ |
| 409 | èµ„æºå†²çª | ç”¨æˆ·åå·²å­˜åœ¨ |
| 422 | ä¸šåŠ¡é€»è¾‘é”™è¯¯ | å¯†ç å¼ºåº¦ä¸è¶³ |
| 429 | è¯·æ±‚è¿‡äºé¢‘ç¹ | é™æµè§¦å‘ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | æ•°æ®åº“è¿æ¥å¤±è´¥ |

**TypeScript æ¥å£å®šä¹‰ï¼š**

```typescript
// types/api.ts

// é€šç”¨å“åº”åŒ…è£…
interface ApiResponse<T = null> {
  code: number;
  message: string;
  data: T;
  timestamp: number;
  error?: ApiError;
}

// é”™è¯¯è¯¦æƒ…
interface ApiError {
  type: string;
  details?: Record<string, string[]>;
}

// åˆ†é¡µæ•°æ®
interface PaginatedData<T> {
  list: T[];
  pagination: {
    page: number;
    pageSize: number;
    total: number;
    totalPages: number;
  };
}

// ä½¿ç”¨ç¤ºä¾‹
interface User {
  id: string;
  username: string;
  email: string;
  avatarUrl?: string;
  createdAt: string;
}

// GET /api/users/me
// è¿”å›ç±»å‹: ApiResponse<User>

// GET /api/users?page=1&pageSize=20  
// è¿”å›ç±»å‹: ApiResponse<PaginatedData<User>>
```

**å®é™…å“åº”ç¤ºä¾‹ï¼š**

```javascript
// è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
// GET /api/auth/me
{
  "code": 200,
  "message": "success",
  "data": {
    "id": "u5r8k2m9p3q7",
    "username": "eric",
    "email": "eric@example.com",
    "avatarUrl": "/avatars/eric.png",
    "roles": ["creator"],
    "createdAt": "2026-02-17T08:30:00Z"
  },
  "timestamp": 1708156800000
}

// ç”¨æˆ·åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
// GET /api/admin/users?page=1&pageSize=10
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      { "id": "u1", "username": "user1", ... },
      { "id": "u2", "username": "user2", ... }
    ],
    "pagination": {
      "page": 1,
      "pageSize": 10,
      "total": 156,
      "totalPages": 16
    }
  },
  "timestamp": 1708156800000
}

// å‚æ•°é”™è¯¯
// POST /api/auth/register (ç¼ºå°‘ç”¨æˆ·å)
{
  "code": 400,
  "message": "å‚æ•°éªŒè¯å¤±è´¥",
  "data": null,
  "timestamp": 1708156800000,
  "error": {
    "type": "ValidationError",
    "details": {
      "username": ["ç”¨æˆ·åä¸èƒ½ä¸ºç©º", "ç”¨æˆ·åé•¿åº¦éœ€2-50å­—ç¬¦"],
      "email": ["é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"]
    }
  }
}

// æœªæˆæƒ
// GET /api/admin/users (æ— Token)
{
  "code": 401,
  "message": "è¯·å…ˆç™»å½•",
  "data": null,
  "timestamp": 1708156800000
}

// æƒé™ä¸è¶³
// GET /api/admin/users (æ™®é€šç”¨æˆ·è®¿é—®)
{
  "code": 403,
  "message": "æ— æƒé™è®¿é—®è¯¥èµ„æº",
  "data": null,
  "timestamp": 1708156800000
}
```

---

### 6.2 API æ¥å£è¯´æ˜

> **æ³¨æ„**ï¼šè¯¦ç»†çš„ API è®¾è®¡å·²ç§»è‡³ç‹¬ç«‹æ–‡æ¡£ [`api-design.md`](./api-design.md)

æœ¬æ–‡æ¡£ä»…åˆ—å‡ºä¸»è¦æ¥å£æ¦‚è§ˆï¼š

| å®ä½“ | ä¸»è¦ç«¯ç‚¹ | è¯´æ˜ |
|------|---------|------|
| **Messages** | `GET/POST/DELETE /api/messages` | æ¶ˆæ¯å†å²ã€å‘é€ã€æ¸…ç©º |
| **Topics** | `GET/POST/PUT/DELETE /api/topics` | Topic CRUDã€æ¶ˆæ¯å½’æ¡£ |
| **User Profiles** | `GET/PUT /api/user-profiles` | ç”¨æˆ·ç”»åƒæŸ¥è¯¢ä¸æ›´æ–° |
| **Experts** | `GET /api/experts/:id` | ä¸“å®¶è¯¦æƒ…ã€å¯¹è¯ç»Ÿè®¡ |
| **Expert Skills** | `GET /api/expert-skills` | ä¸“å®¶å¯ç”¨çš„æŠ€èƒ½åˆ—è¡¨ |
| **Studio** | `/api/studio/*` | åˆ›ä½œè€…å·¥ä½œå®¤æ¥å£ |
| **Admin** | `/api/admin/*` | ç®¡ç†åå°æ¥å£ |

### 6.3 SSE æµå¼æ¥å£è®¾è®¡

```javascript
// GET /api/chat/stream?expert_id=eric
// Headers: Authorization: Bearer <token>

// å…ˆPOSTå‘é€æ¶ˆæ¯
// POST /api/chat/send
// Body: {"expert_id": "eric", "content": "ä½ å¥½"}
// Response: {"message_id": "msg_123", "stream_url": "/api/chat/stream?expert_id=eric"}

// ç„¶åé€šè¿‡SSEæ¥æ”¶æµå¼å›å¤
event: message
data: {"type": "start", "messageId": "msg_456"}

event: delta
data: {"content": "ä½ å¥½"}

event: delta
data: {"content": "ï¼"}

event: delta
data: {"content": "æˆ‘"}

event: tool_call
data: {"tool": "weather", "params": {"city": "ä¸Šæµ·"}}

event: delta
data: {"content": "ä¸Šæµ·ä»Šå¤©å¤©æ°”æ™´æœ—..."}

event: end
data: {"type": "complete", "usage": {"prompt": 100, "completion": 50}}
```

---

## 7. æ•°æ®åº“æ‰©å±•

### 7.1 æ ¸å¿ƒè®¾è®¡åŸåˆ™

**V1çš„ä¼šè¯æ¨¡å‹**:
```
ä¸€ä¸ªç”¨æˆ· + ä¸€ä¸ªä¸“å®¶ = ä¸€ä¸ªè¿ç»­å¯¹è¯ï¼ˆæ²¡æœ‰å¤šä¼šè¯æ¦‚å¿µï¼‰

ç”¨æˆ·A + ä¸“å®¶Eric = å”¯ä¸€çš„å¯¹è¯ä¸Šä¸‹æ–‡
ç”¨æˆ·A + ä¸“å®¶Linda = å¦ä¸€ä¸ªç‹¬ç«‹çš„å¯¹è¯ä¸Šä¸‹æ–‡
```

ä¸ChatGPTçš„åŒºåˆ«:
- âŒ ChatGPT: ç”¨æˆ·å¯ä»¥æ–°å»ºå¤šä¸ªç‹¬ç«‹å¯¹è¯ï¼ˆsession1, session2...ï¼‰
- âœ… V1: ç”¨æˆ·å’Œä¸“å®¶çš„å¯¹è¯æ˜¯è¿ç»­çš„ï¼Œé€šè¿‡`expert_id`+`contact_id`å®šä½

### 7.2 æ–°å¢è¡¨

#### æ–¹æ¡ˆAï¼šä¸€ä¸ªç”¨æˆ·ä¸€ä¸ªç”»åƒï¼ˆå½“å‰è®¾è®¡ï¼‰

```sql
-- contacts è¡¨ - ä¸€å¯¹ä¸€
CREATE TABLE contacts (
  user_id VARCHAR(32) PRIMARY KEY,
  interests JSON DEFAULT '[]',
  taboos JSON DEFAULT '[]',
  expert_notes JSON DEFAULT '{}',
  -- æ‰€æœ‰ä¸“å®¶å…±äº«åŒä¸€ä¸ªç”»åƒ
  FOREIGN KEY (user_id) REFERENCES users(id)
);
```

#### æ–¹æ¡ˆBï¼šä¸€ä¸ªä¸“å®¶ä¸€ä¸ªç”¨æˆ·ä¸€ä¸ªç”»åƒï¼ˆç‹¬ç«‹ç”»åƒï¼‰

```sql
-- ç”¨æˆ·è¡¨
CREATE TABLE users (
  id VARCHAR(32) PRIMARY KEY,
  username VARCHAR(50) UNIQUE NOT NULL,
  email VARCHAR(100) UNIQUE NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  avatar_url VARCHAR(255),
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  last_login_at DATETIME,
  is_active BOOLEAN DEFAULT TRUE
);

-- è§’è‰²è¡¨
CREATE TABLE roles (
  id INT PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(50) UNIQUE NOT NULL COMMENT 'è§’è‰²æ ‡è¯†ï¼šadmin/creator/user',
  label VARCHAR(50) NOT NULL COMMENT 'æ˜¾ç¤ºåç§°ï¼šç®¡ç†å‘˜/åˆ›ä½œè€…/ç”¨æˆ·',
  description VARCHAR(255),
  is_system BOOLEAN DEFAULT FALSE COMMENT 'ç³»ç»Ÿå†…ç½®è§’è‰²ä¸å¯åˆ é™¤',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- æƒé™è¡¨
CREATE TABLE permissions (
  id INT PRIMARY KEY AUTO_INCREMENT,
  code VARCHAR(100) UNIQUE NOT NULL COMMENT 'æƒé™ç ï¼šuser:create, expert:editç­‰',
  name VARCHAR(100) NOT NULL COMMENT 'æƒé™åç§°',
  type ENUM('menu', 'button', 'api') DEFAULT 'api' COMMENT 'æƒé™ç±»å‹',
  parent_id INT DEFAULT NULL COMMENT 'çˆ¶æƒé™IDï¼Œç”¨äºèœå•å±‚çº§',
  route_path VARCHAR(255) COMMENT 'Vueè·¯ç”±è·¯å¾„ï¼Œèœå•æƒé™ç”¨',
  route_component VARCHAR(255) COMMENT 'Vueç»„ä»¶è·¯å¾„',
  route_icon VARCHAR(50) COMMENT 'èœå•å›¾æ ‡',
  sort_order INT DEFAULT 0 COMMENT 'æ’åº',
  is_visible BOOLEAN DEFAULT TRUE COMMENT 'æ˜¯å¦æ˜¾ç¤ºåœ¨èœå•',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (parent_id) REFERENCES permissions(id)
);

-- åˆå§‹åŒ–é»˜è®¤æƒé™æ•°æ®
INSERT INTO permissions (code, name, type, route_path, route_component, route_icon, sort_order) VALUES
-- å…¬å¼€é¡µé¢ï¼ˆæ— éœ€ç™»å½•ï¼‰
('page:login', 'ç™»å½•é¡µ', 'menu', '/login', 'Login.vue', null, 0),
('page:register', 'æ³¨å†Œé¡µ', 'menu', '/register', 'Register.vue', null, 0),

-- ç”¨æˆ·ç«¯ï¼ˆæ‰€æœ‰ç™»å½•ç”¨æˆ·ï¼‰
('page:chat', 'èŠå¤©é¡µ', 'menu', '/chat/:expertId?', 'Chat.vue', 'MessageOutlined', 1),
('page:experts', 'ä¸“å®¶å¹¿åœº', 'menu', '/experts', 'Experts.vue', 'AppstoreOutlined', 2),
('page:profile', 'ä¸ªäººä¸­å¿ƒ', 'menu', '/profile', 'Profile.vue', 'UserOutlined', 3),
('page:history', 'å†å²è®°å½•', 'menu', '/history', 'History.vue', 'HistoryOutlined', 4),
('page:topics', 'è¯é¢˜ç®¡ç†', 'menu', '/topics', 'Topics.vue', 'FolderOutlined', 5),
-- Messages API æƒé™
('api:messages:read', 'è¯»å–æ¶ˆæ¯', 'api', null, null, null, 0),
('api:messages:create', 'å‘é€æ¶ˆæ¯', 'api', null, null, null, 0),
('api:messages:delete', 'åˆ é™¤æ¶ˆæ¯', 'api', null, null, null, 0),
-- Topics API æƒé™
('api:topics:read', 'è¯»å–Topic', 'api', null, null, null, 0),
('api:topics:create', 'åˆ›å»ºTopic', 'api', null, null, null, 0),
('api:topics:update', 'æ›´æ–°Topic', 'api', null, null, null, 0),
('api:topics:delete', 'åˆ é™¤Topic', 'api', null, null, null, 0),
-- User Profiles API æƒé™
('api:user-profiles:read', 'è¯»å–ç”¨æˆ·ç”»åƒ', 'api', null, null, null, 0),
('api:user-profiles:update', 'æ›´æ–°ç”¨æˆ·ç”»åƒ', 'api', null, null, null, 0),

-- ä¸“å®¶å·¥ä½œå®¤ï¼ˆåˆ›ä½œè€…ï¼‰
('menu:studio', 'ä¸“å®¶å·¥ä½œå®¤', 'menu', '/studio', 'Studio/Overview.vue', 'EditOutlined', 10),
('menu:studio:experts', 'æˆ‘çš„ä¸“å®¶', 'menu', '/studio/experts', 'Studio/MyExperts.vue', null, 11),
('menu:studio:skills', 'æˆ‘çš„æŠ€èƒ½', 'menu', '/studio/skills', 'Studio/MySkills.vue', null, 12),
('menu:studio:analytics', 'æ•°æ®åˆ†æ', 'menu', '/studio/analytics', 'Studio/Analytics.vue', null, 13),
('api:expert:create', 'åˆ›å»ºä¸“å®¶', 'api', null, null, null, 0),
('api:expert:edit', 'ç¼–è¾‘ä¸“å®¶', 'api', null, null, null, 0),
('api:expert:publish', 'å‘å¸ƒä¸“å®¶', 'api', null, null, null, 0),
('api:skill:create', 'åˆ›å»ºæŠ€èƒ½', 'api', null, null, null, 0),
('api:skill:edit', 'ç¼–è¾‘æŠ€èƒ½', 'api', null, null, null, 0),

-- ç®¡ç†åå°ï¼ˆç®¡ç†å‘˜ï¼‰
('menu:dashboard', 'ä»ªè¡¨ç›˜', 'menu', '/admin', 'Admin/Dashboard.vue', 'DashboardOutlined', 20),
('menu:user:manage', 'ç”¨æˆ·ç®¡ç†', 'menu', '/admin/users', 'Admin/UserManage.vue', 'TeamOutlined', 21),
('menu:expert:manage', 'ä¸“å®¶ç®¡ç†', 'menu', '/admin/experts', 'Admin/ExpertManage.vue', 'RobotOutlined', 22),
('menu:provider:manage', 'æä¾›å•†ç®¡ç†', 'menu', '/admin/providers', 'Admin/ProviderManage.vue', 'CloudOutlined', 23),
('menu:model:manage', 'æ¨¡å‹é…ç½®', 'menu', '/admin/models', 'Admin/ModelManage.vue', 'SettingOutlined', 24),
('menu:skill:manage', 'æŠ€èƒ½ç®¡ç†', 'menu', '/admin/skills', 'Admin/SkillManage.vue', 'ToolOutlined', 25),
('menu:topic:manage', 'è¯é¢˜ç®¡ç†', 'menu', '/admin/topics', 'Admin/TopicManage.vue', 'FolderOutlined', 26),
('menu:system', 'ç³»ç»Ÿè®¾ç½®', 'menu', '/admin/system', 'Admin/SystemSettings.vue', 'ControlOutlined', 27),
('menu:logs', 'æ—¥å¿—æŸ¥çœ‹', 'menu', '/admin/logs', 'Admin/LogViewer.vue', 'FileTextOutlined', 28),
('menu:monitor', 'å®æ—¶ç›‘æ§', 'menu', '/admin/monitor', 'Admin/Monitor.vue', 'LineChartOutlined', 29),
-- ç®¡ç†åå° API æƒé™
('api:user:manage', 'ç”¨æˆ·ç®¡ç†', 'api', null, null, null, 0),
('api:user:role', 'ä¿®æ”¹è§’è‰²', 'api', null, null, null, 0),
('api:expert:audit', 'å®¡æ ¸ä¸“å®¶', 'api', null, null, null, 0),
('api:provider:manage', 'æä¾›å•†ç®¡ç†', 'api', null, null, null, 0),
('api:model:manage', 'æ¨¡å‹ç®¡ç†', 'api', null, null, null, 0),
('api:skill:manage', 'æŠ€èƒ½ç®¡ç†', 'api', null, null, null, 0),
('api:topic:manage', 'è¯é¢˜ç®¡ç†', 'api', null, null, null, 0),
('api:system:config', 'ç³»ç»Ÿé…ç½®', 'api', null, null, null, 0);

-- è§’è‰²-æƒé™å…³è”è¡¨
CREATE TABLE role_permissions (
  role_id INT NOT NULL,
  permission_id INT NOT NULL,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (role_id, permission_id),
  FOREIGN KEY (role_id) REFERENCES roles(id) ON DELETE CASCADE,
  FOREIGN KEY (permission_id) REFERENCES permissions(id) ON DELETE CASCADE
);

-- ç”¨æˆ·-è§’è‰²å…³è”è¡¨ï¼ˆæ”¯æŒå¤šè§’è‰²ï¼‰
CREATE TABLE user_roles (
  user_id VARCHAR(32) NOT NULL,
  role_id INT NOT NULL,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (user_id, role_id),
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
  FOREIGN KEY (role_id) REFERENCES roles(id) ON DELETE CASCADE
);

-- æ’å…¥é»˜è®¤è§’è‰²
INSERT INTO roles (id, name, label, description, is_system) VALUES
(1, 'admin', 'å¹³å°ç®¡ç†å‘˜', 'æ‹¥æœ‰æ‰€æœ‰æƒé™', TRUE),
(2, 'creator', 'ä¸“å®¶åˆ›ä½œè€…', 'å¯ä»¥åˆ›å»ºå’Œç®¡ç†è‡ªå·±çš„ä¸“å®¶', TRUE),
(3, 'user', 'æ™®é€šç”¨æˆ·', 'åªèƒ½ä½¿ç”¨ä¸“å®¶è¿›è¡Œå¯¹è¯', TRUE);

-- ä¸ºè§’è‰²åˆ†é…æƒé™
-- admin: æ‰€æœ‰æƒé™ï¼ˆè‡ªåŠ¨åŒ…å«æ–°å¢çš„æ‰€æœ‰èœå•å’ŒAPIæƒé™ï¼‰
INSERT INTO role_permissions (role_id, permission_id)
SELECT 1, id FROM permissions;

-- creator: ç”¨æˆ·ç«¯ + å·¥ä½œå®¤æƒé™
INSERT INTO role_permissions (role_id, permission_id) VALUES
(2, (SELECT id FROM permissions WHERE code = 'page:chat')),
(2, (SELECT id FROM permissions WHERE code = 'page:experts')),
(2, (SELECT id FROM permissions WHERE code = 'page:profile')),
(2, (SELECT id FROM permissions WHERE code = 'page:history')),
(2, (SELECT id FROM permissions WHERE code = 'page:topics')),
(2, (SELECT id FROM permissions WHERE code = 'menu:studio')),
(2, (SELECT id FROM permissions WHERE code = 'menu:studio:experts')),
(2, (SELECT id FROM permissions WHERE code = 'menu:studio:skills')),
(2, (SELECT id FROM permissions WHERE code = 'menu:studio:analytics')),
(2, (SELECT id FROM permissions WHERE code = 'api:expert:create')),
(2, (SELECT id FROM permissions WHERE code = 'api:expert:edit')),
(2, (SELECT id FROM permissions WHERE code = 'api:expert:publish')),
(2, (SELECT id FROM permissions WHERE code = 'api:skill:create')),
(2, (SELECT id FROM permissions WHERE code = 'api:skill:edit'));

-- user: ä»…ç”¨æˆ·ç«¯æƒé™
INSERT INTO role_permissions (role_id, permission_id) VALUES
(3, (SELECT id FROM permissions WHERE code = 'page:chat')),
(3, (SELECT id FROM permissions WHERE code = 'page:experts')),
(3, (SELECT id FROM permissions WHERE code = 'page:profile')),
(3, (SELECT id FROM permissions WHERE code = 'page:history')),
(3, (SELECT id FROM permissions WHERE code = 'page:topics')),
-- Messages æƒé™
(3, (SELECT id FROM permissions WHERE code = 'api:messages:read')),
(3, (SELECT id FROM permissions WHERE code = 'api:messages:create')),
(3, (SELECT id FROM permissions WHERE code = 'api:messages:delete')),
-- Topics æƒé™
(3, (SELECT id FROM permissions WHERE code = 'api:topics:read')),
(3, (SELECT id FROM permissions WHERE code = 'api:topics:create')),
(3, (SELECT id FROM permissions WHERE code = 'api:topics:update')),
(3, (SELECT id FROM permissions WHERE code = 'api:topics:delete')),
-- User Profiles æƒé™
(3, (SELECT id FROM permissions WHERE code = 'api:user-profiles:read')),
(3, (SELECT id FROM permissions WHERE code = 'api:user-profiles:update'));

-- ç”¨æˆ·ç™»å½•å‡­è¯è¡¨ï¼ˆåŒTokenæœºåˆ¶ï¼‰
-- æ³¨æ„ï¼šä¸æ˜¯AIä¼šè¯ï¼Œæ˜¯ç”¨æˆ·ç™»å½•æ€
CREATE TABLE user_login_credentials (
  id VARCHAR(64) PRIMARY KEY,
  user_id VARCHAR(32) NOT NULL,
  refresh_token VARCHAR(255) NOT NULL,
  expires_at DATETIME NOT NULL,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  ip_address VARCHAR(45),
  user_agent VARCHAR(255),
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);

-- ç”¨æˆ·-ä¸“å®¶å…³ç³»ï¼ˆæ”¶è—ã€è¯„åˆ†ï¼‰
CREATE TABLE user_expert_relations (
  id INT AUTO_INCREMENT PRIMARY KEY,
  user_id VARCHAR(32) NOT NULL,
  expert_id VARCHAR(32) NOT NULL,
  relation_type ENUM('favorite', 'rating') NOT NULL,
  rating TINYINT CHECK (rating >= 1 AND rating <= 5),
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  UNIQUE KEY unique_relation (user_id, expert_id, relation_type),
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
  FOREIGN KEY (expert_id) REFERENCES experts(id) ON DELETE CASCADE
);

-- ä¿®æ”¹ messages è¡¨ï¼Œæ·»åŠ  user_id å­—æ®µ
ALTER TABLE messages ADD COLUMN user_id VARCHAR(32) AFTER id;
ALTER TABLE messages ADD FOREIGN KEY (user_id) REFERENCES users(id);

-- æ–¹æ¡ˆBï¼šç‹¬ç«‹ç”»åƒè®¾è®¡

-- user_profilesï¼šç”¨æˆ·ä¸»åŠ¨è®¾ç½®çš„å…¬å¼€èµ„æ–™ï¼ˆç”¨æˆ·è‡ªå·±å¡«å†™ï¼Œæ‰€æœ‰ä¸“å®¶å¯è§ï¼‰
CREATE TABLE user_profiles (
  user_id VARCHAR(32) PRIMARY KEY,
  display_name VARCHAR(100),            -- æ˜µç§°
  bio TEXT,                             -- ä¸ªäººç®€ä»‹
  interests JSON DEFAULT '[]',          -- ç”¨æˆ·ä¸»åŠ¨è®¾ç½®çš„å…´è¶£
  preferences JSON DEFAULT '{}',        -- ç”¨æˆ·åå¥½ï¼ˆå¦‚ï¼šå›å¤é•¿åº¦ã€è¯­æ°”ï¼‰
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);

-- expert_user_profilesï¼šä¸“å®¶è§†è§’çš„ç”¨æˆ·ç”»åƒï¼ˆæ¯ä¸ªä¸“å®¶ç‹¬ç«‹ç»´æŠ¤ï¼‰
-- è¡¨åè¯´æ˜ï¼šä¸“å®¶(expert)å¯¹ç”¨æˆ·(user)çš„è®¤çŸ¥(profiles)
CREATE TABLE expert_user_profiles (
  user_id VARCHAR(32) NOT NULL,
  expert_id VARCHAR(32) NOT NULL,
  
  -- è¯¥ä¸“å®¶å¯¹è¿™ä¸ªç”¨æˆ·çš„è®¤çŸ¥
  observed_interests JSON DEFAULT '[]',   -- ä¸“å®¶è§‚å¯Ÿåˆ°çš„å…´è¶£ï¼ˆAIåˆ†æå¯¹è¯å¾—å‡ºï¼‰
  observed_taboos JSON DEFAULT '[]',      -- ä¸“å®¶è§‚å¯Ÿåˆ°çš„ç¦å¿Œ
  notes TEXT,                             -- ä¸“å®¶çš„è§‚å¯Ÿç¬”è®°
  relationship JSON DEFAULT '{}',         -- å…³ç³»çŠ¶æ€ {"trust": 0.8, "sessions": 5}
  
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (user_id, expert_id),
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
  FOREIGN KEY (expert_id) REFERENCES experts(id) ON DELETE CASCADE
);

-- æ–¹æ¡ˆå¯¹æ¯”è¯´æ˜ï¼š
-- æ–¹æ¡ˆAï¼ˆå…±äº«ç”»åƒ contactsï¼‰ï¼š
--   - ä¼˜ç‚¹ï¼šæ‰€æœ‰ä¸“å®¶å…±äº«è®¤çŸ¥ï¼Œç”¨æˆ·åªéœ€è¦è¯´ä¸€æ¬¡"æˆ‘å–œæ¬¢ç§‘å¹»"
--   - ç¼ºç‚¹ï¼šä¸“å®¶Açš„è®°å½•å¯èƒ½å½±å“ä¸“å®¶Bçš„åˆ¤æ–­
--   
-- æ–¹æ¡ˆBï¼ˆç‹¬ç«‹ç”»åƒ expert_user_profiles + ç”¨æˆ·èµ„æ–™ user_profilesï¼‰ï¼š
--   - ä¼˜ç‚¹ï¼š
--     1. æ¯ä¸ªä¸“å®¶æœ‰ç‹¬ç«‹è§†è§’ï¼ŒEricè®°å½•"ä»–å–œæ¬¢ä»£ç "ï¼ŒLindaè®°å½•"ä»–å‹åŠ›å¤§"
--     2. user_profiles å­˜å‚¨ç”¨æˆ·ä¸»åŠ¨è®¾ç½®çš„èµ„æ–™ï¼ˆæ˜µç§°ã€ç®€ä»‹ç­‰ï¼‰ï¼Œæ‰€æœ‰ä¸“å®¶å¯è§
--   - ç¼ºç‚¹ï¼šä¸“å®¶è§‚å¯Ÿåˆ°çš„ä¿¡æ¯ä¸å…±äº«

-- æ¨èï¼šæ–¹æ¡ˆB
-- - user_profilesï¼šç”¨æˆ·è‡ªå·±å¡«å†™çš„èµ„æ–™ï¼ˆæ˜µç§°ã€ç®€ä»‹ã€å…´è¶£ï¼‰ï¼Œæ‰€æœ‰ä¸“å®¶å¯è§
-- - expert_user_profilesï¼šæ¯ä¸ªä¸“å®¶ç‹¬ç«‹ç»´æŠ¤çš„è®¤çŸ¥ï¼ˆAIåˆ†æå¾—å‡ºï¼‰ï¼Œäº’ä¸å¹²æ‰°

-- ä½¿ç”¨ç¤ºä¾‹ï¼š
-- 1. ç”¨æˆ·è®¾ç½® "èŒä¸šï¼šç¨‹åºå‘˜ï¼Œå…´è¶£ï¼šç§‘å¹»ç”µå½±" â†’ å†™å…¥ user_profiles
-- 2. Eric ä»å¯¹è¯ä¸­å‘ç° "ä»–å–œæ¬¢Rust" â†’ å†™å…¥ expert_user_profiles (expert_id='eric')
-- 3. Linda çœ‹ä¸åˆ° "ä»–å–œæ¬¢Rust"ï¼Œä½†èƒ½çœ‹åˆ°ç”¨æˆ·èµ„æ–™ä¸­çš„ "èŒä¸šï¼šç¨‹åºå‘˜"

-- æ•°æ®è¿ç§»è¯´æ˜ï¼š
-- 1. ç°æœ‰ contacts æ•°æ®æ‹†åˆ†åˆ° user_profilesï¼ˆåŸºç¡€ä¿¡æ¯ï¼‰å’Œ expert_user_profilesï¼ˆä¸“å®¶è§‚å¯Ÿï¼‰
-- 2. å¦‚æœæ˜¯æ–°ç³»ç»Ÿï¼š
--    - æ³¨å†Œæ—¶åˆ›å»º user_profiles è®°å½•ï¼ˆç©ºï¼‰
--    - é¦–æ¬¡å¯¹è¯æ—¶åˆ›å»º expert_user_profiles è®°å½•ï¼ˆè¯¥ä¸“å®¶-ç”¨æˆ·ç»„åˆï¼‰
```

### 7.3 è¡¨å…³ç³»å›¾

```
usersï¼ˆç”¨æˆ·è´¦å· - åŸºç¡€ä¿¡æ¯ï¼‰
  â”œâ”€â”€ user_login_credentialsï¼ˆç™»å½•å‡­è¯ï¼ŒåŒTokenï¼‰
  â”œâ”€â”€ user_rolesï¼ˆç”¨æˆ·-è§’è‰²å…³è”ï¼‰
  â”‚       â””â”€â”€ rolesï¼ˆè§’è‰²å®šä¹‰ï¼šadmin/creator/userï¼‰
  â”‚             â””â”€â”€ role_permissionsï¼ˆè§’è‰²-æƒé™å…³è”ï¼‰
  â”‚                   â””â”€â”€ permissionsï¼ˆæƒé™å®šä¹‰ï¼Œå«èœå•è·¯ç”±é…ç½®ï¼‰
  â”œâ”€â”€ user_expert_relationsï¼ˆæ”¶è—/è¯„åˆ†ï¼‰
  â”œâ”€â”€ contactsï¼ˆç”¨æˆ·ç”»åƒæ¡£æ¡ˆï¼Œä¸€å¯¹ä¸€æ‰©å±•ï¼‰
  â”‚       â””â”€â”€ interests, taboos, expert_notesï¼ˆè·¨ä¸“å®¶å…±äº«ï¼‰
  â””â”€â”€ messagesï¼ˆç”¨æˆ·å‘é€çš„æ¶ˆæ¯ï¼‰
        â”œâ”€â”€ expertsï¼ˆå…³è”ä¸“å®¶ï¼‰
        â””â”€â”€ topicsï¼ˆè¯é¢˜å½’æ¡£ï¼‰

expertsï¼ˆä¸“å®¶é…ç½®ï¼‰
  â”œâ”€â”€ messagesï¼ˆé€šè¿‡ expert_id å…³è”ï¼‰
  â”œâ”€â”€ expert_skillsï¼ˆä¸“å®¶-æŠ€èƒ½å…³è”ï¼Œå¯ç”¨/é…ç½®ï¼‰
  â”‚       â””â”€â”€ skillsï¼ˆæŠ€èƒ½å®šä¹‰ï¼‰
  â””â”€â”€ è¯»å–/å†™å…¥ contactsï¼ˆå…±äº«ç”¨æˆ·ç”»åƒï¼‰

providersï¼ˆæ¨¡å‹æä¾›å•†é…ç½®ï¼‰
  â””â”€â”€ modelsï¼ˆLLMæ¨¡å‹é…ç½®ï¼Œå…³è”æä¾›å•†ï¼‰
      â””â”€â”€ expertsï¼ˆexpressive_model / reflective_model å¼•ç”¨æ¨¡å‹ï¼‰

topicsï¼ˆè¯é¢˜å½’æ¡£ï¼‰
  â””â”€â”€ messagesï¼ˆé€šè¿‡ topic_id å…³è”ï¼‰
```

**æ ¸å¿ƒå…³ç³»è¯´æ˜ï¼š**

| å…³ç³» | è¯´æ˜ |
|------|------|
| `users â†’ messages` | é€šè¿‡ `messages.user_id` å…³è”ï¼Œæ˜ç¡®æ¶ˆæ¯å½’å± |
| `users â†’ contacts` | ä¸€å¯¹ä¸€å…³ç³»ï¼Œ`contacts.user_id` å”¯ä¸€ |
| `messages â†’ experts` | é€šè¿‡ `expert_id` å…³è”ï¼Œè¡¨ç¤ºä¸å“ªä¸ªä¸“å®¶å¯¹è¯ |
| `experts â†” contacts` | æ‰€æœ‰ä¸“å®¶å…±äº«åŒä¸€ä¸ª contacts ç”»åƒæ•°æ® |
| `users â†” experts` | é€šè¿‡ `messages` è¡¨å…³è”ï¼Œå¤šå¯¹å¤šå…³ç³» |

**è¡¨èŒè´£ï¼š**

| è¡¨ | å­˜å‚¨å†…å®¹ | ç¤ºä¾‹å­—æ®µ | ç®¡ç†é¡µé¢ |
|----|---------|---------|---------|
| `users` | è´¦å·å‡­è¯ã€åŸºç¡€èµ„æ–™ | username, email, avatar_url, password_hash | /admin/users |
| `contacts` | AI ç”»åƒæ•°æ®ï¼ˆè·¨ä¸“å®¶å…±äº«ï¼‰ | interests, taboos, expert_notes, personality_tags | ç”¨æˆ·è¯¦æƒ…é¡µå†… |
| `messages` | å¯¹è¯æ¶ˆæ¯ | user_id, expert_id, content, role | /admin/topics |
| `experts` | ä¸“å®¶é…ç½® | name, introduction, speaking_style, expressive_model | /admin/experts, /studio/experts |
| `skills` | æŠ€èƒ½é…ç½® | name, description, skill_md, index_js, source_type | /admin/skills, /studio/skills |
| `expert_skills` | ä¸“å®¶æŠ€èƒ½å…³è” | expert_id, skill_id, is_enabled, config | /studio/experts/:id/skills |
| `providers` | æ¨¡å‹æä¾›å•†é…ç½® | name, base_url, api_key, timeout | /admin/providers |
| `models` | LLMæ¨¡å‹é…ç½® | model_name, context_size, max_tokens, provider_id | /admin/models |
| `topics` | è¯é¢˜å½’æ¡£ | name, description, expert_id, user_id, message_count | /admin/topics |

### 7.4 æƒé™ä¸Vueè·¯ç”±ç»‘å®šè®¾è®¡

**æƒé™è¡¨è®¾è®¡**ï¼š
```sql
-- èœå•æƒé™ç¤ºä¾‹
INSERT INTO permissions (code, name, type, route_path, route_component, route_icon) VALUES
-- ç®¡ç†åå°èœå•
('menu:dashboard', 'ä»ªè¡¨ç›˜', 'menu', '/admin', 'Admin/Dashboard.vue', 'DashboardOutlined'),
('menu:user:manage', 'ç”¨æˆ·ç®¡ç†', 'menu', '/admin/users', 'Admin/UserManage.vue', 'UserOutlined'),
('menu:expert:manage', 'ä¸“å®¶ç®¡ç†', 'menu', '/admin/experts', 'Admin/ExpertManage.vue', 'RobotOutlined'),
('menu:system', 'ç³»ç»Ÿè®¾ç½®', 'menu', '/admin/system', 'Admin/SystemSettings.vue', 'SettingOutlined'),

-- ä¸“å®¶å·¥ä½œå®¤èœå•
('menu:studio', 'ä¸“å®¶å·¥ä½œå®¤', 'menu', '/studio', 'Studio/Overview.vue', 'EditOutlined'),
('menu:studio:experts', 'æˆ‘çš„ä¸“å®¶', 'menu', '/studio/experts', 'Studio/MyExperts.vue', null),
('menu:studio:skills', 'æˆ‘çš„æŠ€èƒ½', 'menu', '/studio/skills', 'Studio/MySkills.vue', null),

-- APIæƒé™
('api:user:create', 'åˆ›å»ºç”¨æˆ·', 'api', null, null, null),
('api:user:delete', 'åˆ é™¤ç”¨æˆ·', 'api', null, null, null),
('api:expert:edit', 'ç¼–è¾‘ä¸“å®¶', 'api', null, null, null),
('api:expert:publish', 'å‘å¸ƒä¸“å®¶', 'api', null, null, null);
```

**å‰ç«¯è·¯ç”±å®ˆå«**ï¼š
```javascript
// router/guards.js
import { usePermissionStore } from '@/stores/permission';

export async function setupRouterGuard(router) {
  router.beforeEach(async (to, from, next) => {
    const permissionStore = usePermissionStore();
    
    // 1. è·å–ç”¨æˆ·æƒé™ï¼ˆå¦‚æœæ²¡æœ‰ç¼“å­˜ï¼‰
    if (!permissionStore.permissions.length) {
      await permissionStore.fetchUserPermissions();
    }
    
    // 2. æ£€æŸ¥è·¯ç”±æ˜¯å¦éœ€è¦æƒé™
    const requiredPermission = to.meta.permission;
    if (requiredPermission) {
      const hasPermission = permissionStore.hasPermission(requiredPermission);
      if (!hasPermission) {
        return next('/403');
      }
    }
    
    // 3. åŠ¨æ€ç”Ÿæˆèœå•
    if (to.path.startsWith('/admin')) {
      permissionStore.generateAdminMenus();
    }
    
    next();
  });
}
```

**åç«¯è¿”å›æƒé™æ•°æ®**ï¼š
```javascript
// GET /api/auth/me è¿”å›
{
  "user": { "id": "u123", "username": "eric" },
  "roles": ["creator"],
  "permissions": [
    // èœå•æƒé™ - ç”¨äºæ¸²æŸ“ä¾§è¾¹æ 
    { "code": "menu:studio", "name": "ä¸“å®¶å·¥ä½œå®¤", "path": "/studio", "icon": "EditOutlined" },
    { "code": "menu:studio:experts", "name": "æˆ‘çš„ä¸“å®¶", "path": "/studio/experts" },
    // APIæƒé™ - ç”¨äºæŒ‰é’®æ˜¾ç¤ºæ§åˆ¶
    { "code": "api:expert:edit", "name": "ç¼–è¾‘ä¸“å®¶" },
    { "code": "api:expert:publish", "name": "å‘å¸ƒä¸“å®¶" }
  ]
}
```

### 7.4 ä¸ºä»€ä¹ˆæ²¡æœ‰conversationsè¡¨ï¼Ÿ

V1çš„è®¾è®¡å“²å­¦æ˜¯**é•¿æœŸè®°å¿†è¿ç»­æ€§**ï¼š
1. ç”¨æˆ·å’Œä¸“å®¶çš„å¯¹è¯æ²¡æœ‰"æ–°å»ºèŠå¤©"æŒ‰é’®
2. æ‰€æœ‰å†å²æ¶ˆæ¯è‡ªåŠ¨å‚ä¸ä¸Šä¸‹æ–‡ï¼ˆé€šè¿‡Topicå½’æ¡£ç®¡ç†é•¿åº¦ï¼‰
3. é€šè¿‡`expert_contacts`è¡¨è®°å½•æœ€åæ´»è·ƒæ—¶é—´

ç”¨æˆ·é€šè¿‡é€‰æ‹©ä¸åŒä¸“å®¶æ¥åˆ‡æ¢å¯¹è¯ä¸Šä¸‹æ–‡ï¼Œè€Œä¸æ˜¯åœ¨åŒä¸€ä¸“å®¶ä¸‹å¼€å¤šä¸ªå¯¹è¯ã€‚

---

## 8. å¼€å‘è®¡åˆ’

### 8.1 é˜¶æ®µåˆ’åˆ†

```
Phase 1: åŸºç¡€æ¶æ„ï¼ˆ1å‘¨ï¼‰
â”œâ”€â”€ åç«¯ï¼šè®¤è¯æœåŠ¡ã€ç”¨æˆ·ç®¡ç†API
â”œâ”€â”€ å‰ç«¯ï¼šé¡¹ç›®åˆå§‹åŒ–ã€è·¯ç”±æ¡†æ¶ã€ç™»å½•é¡µ
â””â”€â”€ æ•°æ®åº“ï¼šæ–°å¢ç”¨æˆ·ç›¸å…³è¡¨

Phase 2: ç”¨æˆ·ç«¯ï¼ˆ2å‘¨ï¼‰
â”œâ”€â”€ èŠå¤©ç•Œé¢ï¼ˆæµå¼è¾“å‡ºï¼‰
â”œâ”€â”€ å†å²è®°å½•ç®¡ç†
â”œâ”€â”€ å“åº”å¼é€‚é…
â””â”€â”€ Topicå±•ç¤º

Phase 3: ä¸“å®¶å·¥ä½œå®¤ï¼ˆ1å‘¨ï¼‰
â”œâ”€â”€ ä¸“å®¶åˆ›å»º/ç¼–è¾‘
â”œâ”€â”€ æŠ€èƒ½ç¼–è¾‘å™¨
â””â”€â”€ åŸºç¡€æ•°æ®åˆ†æ

Phase 4: ç®¡ç†åå°ï¼ˆ1å‘¨ï¼‰
â”œâ”€â”€ ç”¨æˆ·ç®¡ç†
â”œâ”€â”€ ä¸“å®¶å®¡æ ¸
â”œâ”€â”€ ç³»ç»Ÿç›‘æ§
â””â”€â”€ æ—¥å¿—æŸ¥çœ‹

Phase 5: ä¼˜åŒ–ï¼ˆ1å‘¨ï¼‰
â”œâ”€â”€ æ€§èƒ½ä¼˜åŒ–
â”œâ”€â”€ é”™è¯¯å¤„ç†
â”œâ”€â”€ å®‰å…¨åŠ å›º
â””â”€â”€ æ–‡æ¡£å®Œå–„
```

---

## 9. å¾…è®¨è®ºé—®é¢˜

### 9.1 éœ€è¦ä½ ç¡®è®¤çš„é—®é¢˜

1. **ä¸“å®¶æƒé™æ¨¡å‹**
   - ä¸“å®¶ä½œè€…åˆ›å»ºçš„ä¸“å®¶æ˜¯ç§æœ‰çš„è¿˜æ˜¯ç›´æ¥å…¬å¼€ï¼Ÿ
   - æ˜¯å¦éœ€è¦å®¡æ ¸æµç¨‹ï¼Ÿ
   - ç”¨æˆ·èƒ½å¦å…‹éš†/ä¿®æ”¹åˆ«äººçš„ä¸“å®¶ï¼Ÿ

2. **è®¡è´¹æ¨¡å¼**
   - å…è´¹ä½¿ç”¨ï¼Ÿ
   - æŒ‰å¯¹è¯æ¬¡æ•°è®¡è´¹ï¼Ÿ
   - æŒ‰Tokenæ¶ˆè€—è®¡è´¹ï¼Ÿ
   - è®¢é˜…åˆ¶ï¼Ÿ

3. **å¤šç§Ÿæˆ·**
   - æ˜¯å¦éœ€è¦ç»„ç»‡/å›¢é˜Ÿæ¦‚å¿µï¼Ÿ
   - ä¸“å®¶æ˜¯å¦å¯ä»¥åœ¨ç»„ç»‡å†…å…±äº«ï¼Ÿ

4. **æ¶ˆæ¯å­˜å‚¨**
   - æ˜¯å¦æ”¯æŒæ¶ˆæ¯åˆ é™¤ï¼Ÿï¼ˆåˆè§„è¦æ±‚ï¼‰
   - å†å²æ¶ˆæ¯ä¿ç•™å¤šä¹…ï¼Ÿ

5. **æŠ€èƒ½å¸‚åœº**
   - æ˜¯å¦éœ€è¦æŠ€èƒ½åˆ†äº«/ä¸‹è½½åŠŸèƒ½ï¼Ÿ
   - æŠ€èƒ½æ˜¯å¦æœ‰ç‰ˆæœ¬ç®¡ç†ï¼Ÿ

---

## é™„å½•

### A. é…ç½®é¡µé¢æ±‡æ€»

V1 é˜¶æ®µæ‰€æœ‰é…ç½®è¡¨åŠå…¶å¯¹åº”çš„ç®¡ç†é¡µé¢ï¼š

#### ç®¡ç†åå°é…ç½®é¡µé¢ï¼ˆ/admin/*ï¼‰

| é¡µé¢è·¯å¾„ | å¯¹åº”æ•°æ®è¡¨ | åŠŸèƒ½è¯´æ˜ | æƒé™è¦æ±‚ |
|---------|-----------|---------|---------|
| /admin/users | users | ç”¨æˆ·è´¦å·ç®¡ç† | admin |
| /admin/experts | experts | ä¸“å®¶å®¡æ ¸ä¸ç®¡ç† | admin |
| /admin/providers | providers | æ¨¡å‹æä¾›å•†é…ç½® | admin |
| /admin/models | models | LLM æ¨¡å‹é…ç½® | admin |
| /admin/skills | skills | æŠ€èƒ½ç®¡ç†ï¼ˆä»£ç ç¼–è¾‘ï¼‰ | admin |
| /admin/topics | topics, messages | è¯é¢˜ä¸æ¶ˆæ¯ç®¡ç† | admin |
| /admin/system | config | ç³»ç»Ÿå‚æ•°è®¾ç½® | admin |
| /admin/logs | - | ç³»ç»Ÿæ—¥å¿—æŸ¥çœ‹ | admin |
| /admin/monitor | - | å®æ—¶ç›‘æ§é¢æ¿ | admin |

#### ä¸“å®¶å·¥ä½œå®¤é…ç½®é¡µé¢ï¼ˆ/studio/*ï¼‰

| é¡µé¢è·¯å¾„ | å¯¹åº”æ•°æ®è¡¨ | åŠŸèƒ½è¯´æ˜ | æƒé™è¦æ±‚ |
|---------|-----------|---------|---------|
| /studio/experts | experts | æˆ‘çš„ä¸“å®¶ç®¡ç† | creator |
| /studio/experts/:id | experts | ä¸“å®¶ç¼–è¾‘è¡¨å• | creator |
| /studio/skills | skills | æˆ‘çš„æŠ€èƒ½ç®¡ç† | creator |
| /studio/skills/:id | skills | æŠ€èƒ½ç¼–è¾‘è¡¨å• | creator |

### B. æŠ€æœ¯é€‰å‹ç¡®è®¤

| é¡¹ç›® | é€‰æ‹© | å¤‡æ³¨ |
|------|------|------|
| åç«¯æ¡†æ¶ | **Koa 2** | å¼‚æ­¥æµç¨‹æ§åˆ¶æ›´ä¼˜é›… |
| å‰ç«¯æ¡†æ¶ | Vue 3 | Composition API + TypeScript |
| æ„å»ºå·¥å…· | Vite | å¿«é€Ÿå¼€å‘ |
| UIç»„ä»¶åº“ | Element Plus / Ant Design Vue | å¾…é€‰ |
| **èŠå¤©ç»„ä»¶** | **Deep Chat** | ä¸“ä¸ºAIå¯¹è¯è®¾è®¡ï¼Œæ”¯æŒæµå¼è¾“å‡º |
| HTTPå®¢æˆ·ç«¯ | Axios | æ‹¦æˆªå™¨å°è£… |
| çŠ¶æ€ç®¡ç† | Pinia | Vueå®˜æ–¹æ¨è |
| è·¯ç”± | Vue Router 4 | åŠ¨æ€è·¯ç”±å®ˆå« |
| æ ·å¼ | Tailwind CSS / SCSS | å¾…é€‰ |

### C. å‚è€ƒé¡¹ç›®

- **Deep Chat**: https://deepchat.dev/ - Vue/Reactå¯ç”¨çš„AIèŠå¤©ç»„ä»¶
- **ChatGPT Web UI**: èŠå¤©ç•Œé¢è®¾è®¡å‚è€ƒ
- **Dify**: ä¸“å®¶/Agentç¼–æ’ç•Œé¢å‚è€ƒ
- **LangChain UI**: å·¥å…·é…ç½®ç•Œé¢å‚è€ƒ

- **ChatGPT Web UI**: èŠå¤©ç•Œé¢è®¾è®¡å‚è€ƒ
- **Dify**: ä¸“å®¶/Agentç¼–æ’ç•Œé¢å‚è€ƒ
- **LangChain UI**: å·¥å…·é…ç½®ç•Œé¢å‚è€ƒ
